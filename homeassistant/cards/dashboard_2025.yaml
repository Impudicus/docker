# My custom theme can be found here: https://github.com/my-smart-home-yt/MySmartHome-Theme/tree/main

kiosk_mode:
  mobile_settings:
    hide_header: true
    ignore_entity_settings: true
  non_admin_settings:
    hide_header: true
    hide_menubutton: true
    ignore_entity_settings: true
  entity_settings:
    - entity:
        input_boolean.kiosk_mode: 'on'
      hide_header: true
    - entity:
        input_boolean.kiosk_mode: 'off'
      hide_header: false
decluttering_templates:
  light_slider:
    card:
      type: vertical-stack
      cards:
        - type: custom:button-card
          entity: '[[entity]]'
          name: '[[name]]'
          icon: '[[icon]]'
          tap_action:
            action: none
          styles:
            grid:
              - grid-template-columns: 64px 1fr
              - grid-template-areas: '"i n"'
            icon:
              - width: 22px
              - color: var(--gray800)
            img_cell:
              - width: 22px
              - height: 22px
            card:
              - background: none
              - margin-bottom: 12px
              - height: 75px
              - z-index: 1
              - padding: 0
              - position: absolute
            name:
              - justify-self: start
              - font-size: 16px
              - font-weight: 400
              - color: var(--gray800)
        - type: custom:my-slider-v2
          entity: '[[entity]]'
          allowTapping: false
          allowSliding: true
          styles:
            container:
              - border-radius: 30px
            card:
              - height: 75px
              - margin-bottom: 12px
              - border-radius: 25px
            progress:
              - background: var(--active-light)
            thumb:
              - width: 3px
              - height: 30%
              - top: 36%
              - margin-right: 14px
              - border-radius: 5px
              - background: var(--gray800)
            track:
              - background: var(--active-light-off)
  light_toggle:
    card:
      type: custom:button-card
      entity: '[[entity]]'
      name: '[[name]]'
      icon: '[[icon]]'
      show_label: false
      tap_action:
        action: toggle
      state:
        - value: 'on'
          styles:
            card:
              - background: var(--active-light)
        - value: 'off'
          styles:
            card:
              - background: var(--active-light-off)
            name:
              - color: var(--gray800)
            icon:
              - color: var(--gray800)
        - value: unavailable
          styles:
            card:
              - background: var(--active-light-off)
            name:
              - color: var(--gray800)
            icon:
              - color: var(--gray800)
      styles:
        grid:
          - grid-template-columns: 64px 1fr
          - grid-template-areas: '"i n"'
        icon:
          - width: 22px
          - color: var(--gray800)
        img_cell:
          - width: 22px
          - height: 22px
        card:
          - padding: 0
          - height: 75px
          - margin-bottom: 12px
        name:
          - justify-self: start
          - font-size: 16px
          - font-weight: 400
          - color: var(--gray800)
button_card_templates:
  room_conditions:
    variables:
      background: var(--popupBG)
      entity: null
      temp: >
        [[[ return
        Math.round((states['sensor.temperatur_stue_temperature'].state) * 10)/10
        + '°' + '<span style="font-size:0.4em">' +
        Math.round((states['sensor.temperatur_stue_humidity'].state) * 10)/10 +
        '%']]]
    show_icon: false
    show_name: false
    show_label: true
    custom_fields:
      temp: '[[[ return variables.temp ]]]'
      graph:
        card:
          type: custom:mini-graph-card
          entities:
            - entity: '[[[ return variables.entity ]]]'
              color: var(--white)
          line_width: 0
          height: 22
          show:
            icon: false
            name: false
            state: false
            legend: false
            labels: false
          card_mod:
            style: |
              ha-card {
                border-style: none;
                background: none;
              }  
    styles:
      grid:
        - grid-template-areas: '"temp"'
        - grid-template-columns: 1fr
        - grid-template-rows: min-content
      card:
        - padding: 24px
        - background: '[[[ return variables.background ]]]'
      custom_fields:
        temp:
          - justify-self: start
          - text-align: left
          - font-size: 48px
          - color: var(--gray800)
          - line-height: 48px
          - font-weight: 300
          - padding: 12px 0 0 20px
        graph:
          - position: absolute
          - width: 100%
          - left: 0
          - bottom: 0
  sensor_big_percentage:
    variables:
      entity: var_entity
      name: var_name
      icon: var_icon
      background: var(--popupBG)
      label: var_label
      bar: var_bar
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_icon: true
    show_label: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      card:
        - padding: 0
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n" "bar"'
      label:
        - justify-self: start
        - font-size: 40px
        - font-weight: 300
        - padding-left: 20px
        - color: var(--gray800)
      name:
        - justify-self: start
        - align-self: start
        - font-size: 14px
        - color: var(--gray800)
        - padding-left: 20px
        - opacity: '0.7'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: 4px 4px 0 0
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      custom_fields:
        bar:
          - justify-self: start
          - width: 100%
          - background-image: >
              [[[ var color = "var(--red)";  var state = (100 - entity.state); 
              if (state > 50) color = "var(--blue)";  else if(state > 25) color
              = "var(--orange)";

              return `repeating-linear-gradient(45deg,transparent,transparent
              2px,${color} 3px,transparent 4px)` ]]]
          - height: 30px
          - margin-top: 6px
    custom_fields:
      bar: '[[[ return variables.bar ]]]'
  sensor_big_graph:
    variables:
      name: null
      icon: null
      label: null
      background: var(--popupBG)
      text: var(--gray800)
      graph: null
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_label: true
    show_icon: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      card:
        - padding: 4px 4px 20px 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n"'
      label:
        - justify-self: start
        - font-size: 40px
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      custom_fields:
        graph:
          - position: absolute
          - width: 100%
          - left: 0
          - bottom: 0
    custom_fields:
      graph:
        card:
          type: custom:mini-graph-card
          entities:
            - entity: '[[[ return variables.graph ]]]'
              color: var(--red)
          line_width: 0
          height: 200
          show:
            icon: false
            name: false
            state: false
            legend: false
            labels: false
          card_mod:
            style: |
              ha-card {
                border-style: none;
                background: none;
              }
  button_trigger:
    variables:
      name: null
      icon: null
      entity: null
      background: var(--red)
      text: var(--black)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      grid:
        - grid-template-areas: '"i" "n"'
      img_cell:
        - justify-self: start
        - align-self: start
        - width: 24px
        - height: 24px
      icon:
        - width: 24px
        - height: 24px
        - color: '[[[ return variables.text ]]]'
      name:
        - justify-self: start
        - text-align: left
        - font-size: 16px
        - font-weight: 500
        - color: '[[[ return variables.text ]]]'
      card:
        - padding: 20px
        - background: '[[[ return variables.background ]]]'
        - height: 130px
  sensor_big:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    label: >
      [[[  return '<marquee behavior="alternate" scrollamount="2">' +
      variables.label + '<\marquee>' ]]]
    name: '[[[ return variables.name ]]]'
    show_label: true
    styles:
      card:
        - padding: 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i" "l" "n"'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: '-16px -16px 0 0'
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      label:
        - justify-self: start
        - font-size: 2em
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
  sensor_big_2columns:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
      state: var_state
    icon: '[[[ return variables.icon ]]]'
    label: >
      [[[  return '<marquee behavior="alternate" scrollamount="2">' +
      variables.label + '<\marquee>' ]]]
    name: '[[[ return variables.name ]]]'
    show_label: true
    custom_fields:
      state: '[[[ return variables.state ]]]'
    styles:
      card:
        - padding: 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i i" "l state" "n n"'
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - margin: '-16px -16px 0 0'
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      label:
        - justify-self: start
        - font-size: 2em
        - font-weight: 300
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: '0.7'
      custom_fields:
        state:
          - align-self: end
          - font-size: 14px
          - color: var(--gray800)
          - opacity: '0.7'
          - margin-bottom: 5px
  button_toggle:
    variables:
      name: null
      icon: null
      entity: null
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    name: '[[[ return variables.name ]]]'
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--gray800)
          img_cell:
            - background: rgba(var(--highlight_active))
          icon:
            - color: var(--gray000)
          name:
            - color: var(--gray000)
          custom_fields:
            state:
              - color: var(--gray000)
    styles:
      card:
        - padding: 4px 4px 20px 20px
        - height: 180px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"i i" "state icon" "n n"'
        - grid-template-columns: 1fr min-content
        - grid-template-rows: 1fr min-content min-content
      img_cell:
        - justify-self: end
        - align-self: start
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
        - width: 30px
        - height: 30px
      icon:
        - width: 30px
        - height: 30px
        - color: var(--gray800)
      name:
        - justify-self: start
        - font-size: 14px
        - padding: 0
        - color: var(--gray800)
        - opacity: '0.7'
      custom_fields:
        icon:
          - justify-self: end
        state:
          - justify-self: start
          - font-size: 40px
          - font-weight: 300
          - color: var(--gray800)
          - margin-right: 16px
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--green); width:60px; height:60px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--gray000); width:60px; height:60px;">
          </ha-icon>
          `;
        ]]]
      state: |
        [[[
          var state = entity.state
         if(state == "on")
          return `<span>På</san>
          `;
         else 
          return `<span>Av</san>
          `;
        ]]] 
  button_toggle_small:
    variables:
      name: null
      label: null
      icon: null
      entity: null
      background: var(--popupBG)
    icon: '[[[ return variables.icon ]]]'
    entity: '[[[ return variables.entity ]]]'
    label: |
      [[[ return variables.label ]]]    
    name: |
      [[[ return variables.name ]]]
    show_label: true
    tap_action:
      action: toggle
    state:
      - value: 'off'
        styles:
          card:
            - background: var(--gray800)
          icon:
            - color: var(--gray000)
          img_cell:
            - background: rgba(var(--highlight_active))
          name:
            - color: var(--gray000)
          label:
            - color: var(--gray000)
    styles:
      card:
        - height: 66px
        - border-radius: 75px
        - padding: 4px 20px 4px 4px
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-columns: 76px 1fr min-content
        - grid-template-areas: '"i l icon" "i n icon"'
      icon:
        - width: 30px
        - color: var(--gray800)
      img_cell:
        - justify-self: start
        - width: 30px
        - height: 30px
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: 0.7
        - padding-bottom: 7px
      label:
        - justify-self: start
        - font-size: 16px
        - padding-top: 4px
        - font-weight: 500
        - color: var(--gray800)
      custom_fields:
        icon: null
    custom_fields:
      icon: |
        [[[
         var state = entity.state;
         if(state == "on")
          return `<ha-icon
          icon="mdi:toggle-switch"
          style="color: var(--green); width:50px; height:40px;">
          </ha-icon>
          `;
         else 
          return `<ha-icon
          icon="mdi:toggle-switch-off"
          style="color: var(--gray000); width:50px; height:40px;">
          </ha-icon>
          `;
        ]]]
  chips_big_active:
    variables:
      name: null
      entity: null
      icon: null
    entity: '[[[ return variables.entity ]]]'
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 4px
        - background: var(--active-big)
      grid:
        - grid-template-areas: |
            "i n"        
      img_cell:
        - width: 22px
        - height: 22px
        - padding: 9px
        - background: var(--white)
        - border-radius: 100%
      icon:
        - width: 22px
        - height: 22px
        - color: var(--black)
      name:
        - padding: 0 10px
        - font-size: 14px
        - color: var(--black)
  chips_big:
    variables:
      name: null
      entity: null
      icon: null
    entity: '[[[ return variables.entity ]]]'
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 4px
        - background: var(--gray800)
      grid:
        - grid-template-areas: |
            "i n"        
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - width: 22px
        - height: 22px
        - padding: 9px
        - background: var(--gray000)
        - border-radius: 100%
      icon:
        - width: 22px
        - height: 22px
        - color: var(--gray800)
      name:
        - justify-self: start
        - padding: 0 10px
        - font-size: 14px
        - color: var(--gray000)
  chips_medium_active:
    variables:
      name: null
      icon: null
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 10px 16px 10px 12px
        - background: var(--active-small)
      grid:
        - grid-template-areas: '"i n"'
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - align-self: center
        - width: 20px
        - height: 20px
        - background: none
      icon:
        - width: 20px
        - height: 20px
        - margin-top: '-1px'
        - color: var(--black)
      name:
        - justify-self: start
        - font-size: 14px
        - padding-left: 4px
        - color: var(--black)
  chips_medium:
    variables:
      name: null
      icon: null
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    styles:
      card:
        - padding: 10px 16px 10px 12px
        - background: var(--gray800)
      grid:
        - grid-template-areas: '"i n"'
        - grid-template-columns: min-content 1fr
      img_cell:
        - justify-self: start
        - align-self: center
        - width: 20px
        - height: 20px
        - background: none
      icon:
        - width: 20px
        - height: 20px
        - margin-top: '-1px'
        - color: var(--gray000)
      name:
        - justify-self: start
        - font-size: 14px
        - padding-left: 4px
        - color: var(--gray000)
  chips_small:
    variables:
      icon: null
    icon: '[[[ return variables.icon ]]]'
    show_name: false
    styles:
      card:
        - padding: 13px
        - border-radius: 50%
        - background: var(--gray800)
      img_cell:
        - width: 22px
        - height: 22px
      icon:
        - width: 22px
        - height: 22px
        - color: var(--gray000)
  chips_small_active:
    variables:
      icon: null
    icon: '[[[ return variables.icon ]]]'
    show_name: false
    styles:
      card:
        - padding: 13px
        - border-radius: 50%
        - background: var(--active-small)
      img_cell:
        - width: 22px
        - height: 22px
      icon:
        - width: 22px
        - height: 22px
        - color: var(--black)
  room_card:
    variables:
      name: Stue
      icon: mdi:unicorn
      path: '#stue_nede'
      state: null
      background: var(--gray000)
      color: var(--green)
      text: var(--gray800)
      radius: 36px 36px 6px 36px
    icon: '[[[ return variables.icon ]]]'
    name: '[[[ return variables.name ]]]'
    tap_action:
      action: navigate
      navigation_path: '[[[ return variables.path ]]]'
    custom_fields:
      temp: '[[[ return variables.state ]]]'
    styles:
      card:
        - padding: 8px
        - height: 100%
        - border-radius: '[[[ return variables.radius ]]]'
        - background: '[[[ return variables.background ]]]'
      grid:
        - grid-template-areas: '"n i" "temp temp"'
        - grid-template-rows: 1fr min-content
        - grid-template-columns: min-content 1fr
      icon:
        - width: 28px
        - color: var(--black)
      img_cell:
        - justify-self: end
        - background: '[[[ return variables.color ]]]'
        - border-radius: 100%
        - align-self: start
        - width: 60px
        - height: 60px
      name:
        - justify-self: start
        - align-self: start
        - text-align: left
        - font-size: 1em
        - font-weight: 500
        - color: '[[[ return variables.text ]]]'
        - padding: 14px
      custom_fields:
        temp:
          - justify-self: start
          - font-size: 3em
          - line-height: 1em
          - font-weight: 300
          - color: '[[[ return variables.text ]]]'
          - padding: 0 0 6px 14px
  sensor_small:
    variables:
      name: var_name
      label: var_label
      icon: var_icon
      background: var(--popupBG)
      text: var(--gray800)
    name: '[[[ return variables.name ]]]'
    label: '[[[ return variables.label ]]]'
    show_label: true
    icon: '[[[ return variables.icon ]]]'
    styles:
      grid:
        - grid-template-columns: 76px 1fr
        - grid-template-areas: '"i l" "i n"'
      icon:
        - width: 30px
        - color: var(--gray800)
      img_cell:
        - justify-self: start
        - width: 30px
        - height: 30px
        - background: rgba(var(--highlight))
        - padding: 14px
        - border-radius: 50%
      label:
        - justify-self: start
        - font-size: 16px
        - padding-top: 4px
        - font-weight: 500
        - color: var(--gray800)
      card:
        - height: 66px
        - border-radius: 75px
        - padding: 4px 20px 4px 4px
        - background: '[[[ return variables.background ]]]'
      name:
        - justify-self: start
        - font-size: 14px
        - color: var(--gray800)
        - opacity: 0.7
        - padding-bottom: 7px
views:
  - title: Home
    icon: mdi:home
    subview: false
    cards:
      - type: vertical-stack
        cards:
          - type: custom:gap-card
            height: 12px
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: min-content 1fr max-content
              grid-template-rows: min-content
              grid-template-areas: |
                "button . weather"
            cards:
              - type: custom:button-card
                view_layout:
                  grid-area: button
                show_name: false
                show_label: false
                icon: mdi:menu
                entity: input_boolean.kiosk_mode
                hold_action:
                  action: toggle
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      this.dispatchEvent(new Event('hass-toggle-menu', { bubbles: true, composed: true}));
                      return none;
                    ]]]          
                styles:
                  icon:
                    - width: 24px
                    - color: var(--contrast20)
                  img_cell:
                    - width: 30px
                    - height: 30px
                    - padding: 6px
                    - justify-self: start
                  card:
                    - height: 100%
                    - background: none
                    - padding: 6px 0
                    - '--mdc-ripple-press-opacity': 0
              - type: custom:button-card
                view_layout:
                  grid-area: weather
                entity: sensor.weather_now
                show_icon: false
                styles:
                  custom_fields:
                    icon:
                      - justify-self: end
                      - padding-right: 10px
                  grid:
                    - grid-template-areas: '"icon l" "icon n"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: 10px 40px
                  card:
                    - background: none
                    - padding: 6px 0
                    - overflow: visible
                  name:
                    - justify-self: end
                    - font-size: 14px
                    - color: var(--contrast20)
                  label:
                    - justify-self: end
                    - font-size: 26px
                    - color: var(--contrast20)
                name: |
                  [[[ 
                    return entity.attributes.condition
                  ]]]
                label: |
                  [[[ 
                    return `${parseFloat(entity.attributes.temperature).toFixed(1)}°`
                  ]]]
                show_label: true
                custom_fields:
                  icon: |
                    [[[
                      return '<img src = "' + entity.attributes.cond_icon +  '" width="70" height="70" />'
                    ]]] 
                tap_action:
                  action: navigate
                  navigation_path: '#weather'
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 18px 0 0 -12px
              padding-left: 12px
              width: calc(100% + 6px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            buttons:
              - icon: mdi:door
                layout: icon|name
                name: Inngangsdør
                entity: lock.door
                tap_action:
                  action: toggle
                state_styles:
                  unlocked:
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background: var(--gray000)
                      color: var(--gray800)
                styles:
                  name:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                    margin-left: 12px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: none
                ripple: none
                styles:
                  button:
                    margin-left: 50px
                    margin-right: auto
                  icon:
                    display: none
              - icon: mdi:door-open
                layout: icon|name
                name: Terrassedør
                entity: binary_sensor.contact_door_balcony_contact
                ripple: none
                styles:
                  name:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:door-open
                layout: icon|name
                name: Balkongdør
                entity: binary_sensor.contact_door_upstairs_balcony_contact
                ripple: none
                styles:
                  name:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:washing-machine
                layout: icon|state
                entity: sensor.washer
                tap_action:
                  action: navigate
                  navigation_path: '#bad_nede'
                ripple: none
                state:
                  attribute: remain_time
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:dishwasher
                layout: icon|state
                entity: sensor.dishwasher
                ripple: none
                tap_action:
                  action: navigate
                  navigation_path: '#kjokken'
                state:
                  attribute: remain_time
                styles:
                  state:
                    padding: 0 10px
                    color: var(--black)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: '{{ ''flex'' if is_state(config.entity, ''on'') else ''none'' }}'
                    background: var(--active-big)
                    border-radius: 24px
                    color: var(--black)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:vacuum
                entity: vacuum.rolf
                layout: icon
                name: Vacuum
                ripple: none
                tap_action:
                  action: navigate
                  navigation_path: '#rolf'
                styles:
                  name:
                    padding: 0 10px
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: >-
                      {{ 'none' if is_state(config.entity, 'docked') else 'flex'
                      }}
                    background: var(--active-big)
                    border-radius: 50%
                    color: white
                    height: 34px
                  icon:
                    '--mdc-icon-size': 22px
                    color: var(--black)
                    width: 34px
                    height: 34px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
              - icon: mdi:lightbulb-group
                layout: icon|state
                entity: sensor.lights_on
                state: '{{ states(config.entity) }} lys på'
                ripple: none
                tap_action:
                  action: navigate
                  navigation_path: '#lys'
                styles:
                  state:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:solar-power-variant-outline
                layout: icon|state
                entity: sensor.afore_inverter_pv_total_power
                state: '{{ states(config.entity) }} w'
                ripple: none
                styles:
                  state:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: >-
                      {% if states(config.entity) | float(0) < 20 %}none{% else
                      %}flex{% endif %}
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:transmission-tower
                layout: icon|state
                entity: sensor.amsleser_p
                state: '{{ states(config.entity) }} w'
                ripple: none
                styles:
                  state:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
              - icon: mdi:wifi
                layout: icon|name
                name: >-
                  {% if is_state(config.entity, 'on') %}Not giving away my wifi password{% else%}Wifi{%
                  endif %}
                entity: input_boolean.show_wifi
                tap_action:
                  action: toggle
                state_styles:
                  'on':
                    button:
                      background: var(--active-big)
                    name:
                      color: var(--black)
                    icon:
                      background-color: var(--white)
                      color: var(--black)
                styles:
                  name:
                    padding: 0 10px
                    color: var(--gray000)
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--gray800)
                    border-radius: 24px
                    color: var(--white)
                    height: 34px
                    margin-right: 12px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
                    width: 36px
                    height: 36px
                    display: flex
                    margin-left: '-2px'
                    justify-content: center
                    align-items: center
                    background: var(--gray000)
                    border-radius: 50%
        view_layout:
          grid-area: header
      - type: vertical-stack
        cards:
          - type: custom:gap-card
            height: 48
          - type: custom:local-conditional-card
            id: noen
            default: show
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Rom
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: 1. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: show
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: 2. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: hide
                                - oppe: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Alle
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: show
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue oppe"
                      "gang oppe"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>nede']]]
                        icon: mdi:sofa
                        path: '#stue_nede'
                        state: >
                          [[[ 
                            var temp = states['sensor.i_9psl_temperatur'].state;
                            var hum = states['sensor.i_9psl_luftfuktighet'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Kjøkken']]]
                        icon: mdi:silverware-variant
                        path: '#kjokken'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: oppe
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>oppe']]]
                        icon: mdi:desk
                        path: '#stue_oppe'
                        state: >
                          [[[ 
                            var temp = states['sensor.stue_oppe_sensor_temperatur_temperature'].state;
                            var hum = states['sensor.stue_oppe_sensor_temperatur_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--orange)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Gang']]]
                        icon: mdi:door
                        path: '#gang'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: alle
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Rom
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: 1. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: show
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: 2. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: hide
                                - oppe: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Alle
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: show
                                - alle: hide
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue oppe"
                      "gang oppe"    
                      "bado badn"
                      "sov badn"
                      "sov barn"
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>nede']]]
                        icon: mdi:sofa
                        path: '#stue_nede'
                        state: >
                          [[[ 
                            var temp = states['sensor.i_9psl_temperatur'].state;
                            var hum = states['sensor.i_9psl_luftfuktighet'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Kjøkken']]]
                        icon: mdi:silverware-variant
                        path: '#kjokken'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: oppe
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>oppe']]]
                        icon: mdi:desk
                        path: '#stue_oppe'
                        state: >
                          [[[ 
                            var temp = states['sensor.stue_oppe_sensor_temperatur_temperature'].state;
                            var hum = states['sensor.stue_oppe_sensor_temperatur_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--orange)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Gang']]]
                        icon: mdi:door
                        path: '#gang'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: bado
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bad oppe']]]
                        icon: mdi:shower-head
                        path: '#bad_oppe'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_bad_oppe_temperature'].state;
                            var hum = states['sensor.temperatur_bad_oppe_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--red)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: badn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bad nede']]]
                        icon: mdi:washing-machine
                        path: '#bad_nede'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_bad_nede_temperature'].state;
                            var hum = states['sensor.temperatur_bad_nede_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue-dark)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: sov
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Soverom']]]
                        icon: mdi:bed-king
                        path: '#soverom'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_soverom_temperature'].state;
                            var hum = states['sensor.temperatur_soverom_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--purple)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: barn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Barnerom']]]
                        icon: mdi:bed
                        path: '#barnerom'
                        state: |
                          [[[ 
                            var temp1 = parseFloat(states['sensor.temperatur_sandra_temperature'].state);
                            var temp2 = parseFloat(states['sensor.temperatur_jenny_temperature'].state);      
                            var temp = Math.round((temp1 + temp2) / 2);

                            var hum1 = parseFloat(states['sensor.temperatur_sandra_humidity'].state);
                            var hum2 = parseFloat(states['sensor.temperatur_jenny_humidity'].state);      
                            var hum = Math.round((hum1 + hum2) / 2);

                            return temp + '°<span style="font-size:0.3em;opacity:0.7">' + hum + '%</span>'
                          ]]]
                        background: var(--gray000)
                        color: var(--pink)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: nede
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Rom
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: 1. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: show
                                - alle: hide
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: 2. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: hide
                                - oppe: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Alle
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: show
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "stue kjokken"
                      "stue badn"
                      "gang badn"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: stue
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>nede']]]
                        icon: mdi:sofa
                        path: '#stue_nede'
                        state: >
                          [[[ 
                            var temp = states['sensor.i_9psl_temperatur'].state;
                            var hum = states['sensor.i_9psl_luftfuktighet'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--green)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: kjokken
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Kjøkken']]]
                        icon: mdi:silverware-variant
                        path: '#kjokken'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: badn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bad nede']]]
                        icon: mdi:washing-machine
                        path: '#bad_nede'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_bad_nede_temperature'].state;
                            var hum = states['sensor.temperatur_bad_nede_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--blue-dark)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: gang
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Gang']]]
                        icon: mdi:door
                        path: '#gang'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_kjokken_temperature'].state;
                            var hum = states['sensor.temperatur_kjokken_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--yellow)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
              columns: 1
          - type: custom:local-conditional-card
            id: oppe
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Rom
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: 1. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: hide
                                - nede: show
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: 2. etg
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: show
                                - alle: hide
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Alle
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - noen: hide
                                - alle: show
                                - nede: hide
                                - oppe: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr 1fr
                    grid-template-rows: 146px 70px 146px
                    grid-template-areas: |
                      "oppe sov"
                      "oppe bado"
                      "barn bado"    
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: oppe
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Stue<br>oppe']]]
                        icon: mdi:desk
                        path: '#stue_oppe'
                        state: >
                          [[[ 
                            var temp = states['sensor.stue_oppe_sensor_temperatur_temperature'].state;
                            var hum = states['sensor.stue_oppe_sensor_temperatur_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--orange)
                        text: var(--gray800)
                        radius: 36px 36px 6px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: barn
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Barnerom']]]
                        icon: mdi:bed
                        path: '#barnerom'
                        state: |
                          [[[ 
                            var temp1 = parseFloat(states['sensor.temperatur_sandra_temperature'].state);
                            var temp2 = parseFloat(states['sensor.temperatur_jenny_temperature'].state);      
                            var temp = Math.round((temp1 + temp2) / 2);

                            var hum1 = parseFloat(states['sensor.temperatur_sandra_humidity'].state);
                            var hum2 = parseFloat(states['sensor.temperatur_jenny_humidity'].state);      
                            var hum = Math.round((hum1 + hum2) / 2);

                            return temp + '°<span style="font-size:0.3em;opacity:0.7">' + hum + '%</span>'
                          ]]]
                        background: var(--gray000)
                        color: var(--pink)
                        text: var(--gray800)
                        radius: 36px 6px 36px 36px
                    - type: custom:button-card
                      view_layout:
                        grid-area: sov
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Soverom']]]
                        icon: mdi:bed-king
                        path: '#soverom'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_soverom_temperature'].state;
                            var hum = states['sensor.temperatur_soverom_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--purple)
                        text: var(--gray800)
                        radius: 36px 36px 36px 6px
                    - type: custom:button-card
                      view_layout:
                        grid-area: bado
                      template: room_card
                      variables:
                        name: |
                          [[[ return 'Bad oppe']]]
                        icon: mdi:shower-head
                        path: '#bad_oppe'
                        state: >
                          [[[ 
                            var temp = states['sensor.temperatur_bad_oppe_temperature'].state;
                            var hum = states['sensor.temperatur_bad_oppe_humidity'].state;
                            return `
                            ${parseFloat(temp).toFixed(0)}°<span style="font-size:
                          0.3em;opacity:0.7">${parseFloat(hum).toFixed(0)}%</span>
                            `
                          ]]]
                        background: var(--gray000)
                        color: var(--red)
                        text: var(--gray800)
                        radius: 6px 36px 36px 36px
              columns: 1
          - type: custom:gap-card
            height: 48
        view_layout:
          grid-area: left
      - type: vertical-stack
        cards:
          - type: custom:button-card
            entity: sensor.neste_tomming_2
            show_icon: false
            name: >
              [[[ return states['sensor.neste_tomming_2'].state.split(',')[0];
              ]]]
            label: |
              [[[
                const days = states['sensor.neste_tomming_2'].state.split(',')[0];
                if (days === undefined || days === null || isNaN(days)) {
                  return 'Ukjent tid til<br>søppeltømming';
                } else if (days === '0') {
                  return 'Søppel tømmes<br>i dag';
                } else if (days === '1') {
                  return 'Dag til neste<br>søppeltømming';
                } else {
                  return 'Dager til neste<br>søppeltømming';
                }
              ]]]
            show_label: true
            custom_fields:
              type: >
                [[[ return states['sensor.neste_tomming_2'].state.split(',')[1];
                ]]]
            tap_action:
              action: navigate
              navigation_path: '#soppel'
            styles:
              grid:
                - grid-template-areas: '"n l" "n type";'
                - grid-template-columns: 40% 1fr;
                - grid-template-rows: 30% 1fr;
              name:
                - font-size: 70px
                - font-weight: 800
                - justify-self: center;
                - align-self: center;
                - color: var(--contast20)
              card:
                - margin: 0
                - background: none
                - '--mdc-ripple-press-opacity': 0
              label:
                - justify-self: start
                - font-size: 22px
                - font-weight: 500
                - color: var(--contast20)
                - text-align: left;
              custom_fields:
                type:
                  - justify-self: start
                  - font-size: 14px
                  - font-weight: 500
                  - padding-top: 26px
                  - color: var(--contast20)
          - type: custom:gap-card
            height: 12
          - type: custom:local-conditional-card
            id: idag
            default: show
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Strømpriser
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: I dag
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - idag: show
                                - imorgen: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: I morgen
                          ripple: none
                          entity: input_boolean.strompris_tilgjengelig
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - idag: hide
                                - imorgen: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: >-
                                {{ 'flex' if is_state(config.entity, 'on') else
                                'none' }}
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                - type: custom:gap-card
                  height: 12
                - type: custom:apexcharts-card
                  graph_span: 24h
                  experimental:
                    color_threshold: false
                  apex_config:
                    chart:
                      height: 300px
                    grid:
                      show: true
                      borderColor: var(--gray300)
                    markers:
                      size: 5
                      strokeColor: var(--gray200)
                      strokeWidth: 0
                      strokeOpacity: 0
                      hover:
                        size: 8
                  header:
                    show: false
                  span:
                    start: day
                  yaxis:
                    - min: '|-0.1|'
                      max: '|+0.1|'
                      decimals: 1
                      show: true
                  now:
                    show: true
                    label: Nå
                    color: '#ffb581'
                  all_series_config:
                    float_precision: 2
                  series:
                    - entity: sensor.nordpool_kwh_3_10_025
                      show:
                        extremas: true
                        in_header: false
                        name_in_header: true
                        in_chart: true
                      name: Spotpris
                      type: line
                      curve: straight
                      extend_to: end
                      stroke_width: 3
                      opacity: 1
                      color: var(--blue)
                      data_generator: |
                        return entity.attributes.raw_today.map((p) => {
                          return [new Date(p.start), p.value];
                        });
          - type: custom:local-conditional-card
            id: imorgen
            default: hide
            card:
              type: vertical-stack
              cards:
                - type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 1fr max-content
                    grid-template-rows: min-content
                    grid-template-areas: |
                      "one two"  
                  cards:
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Strømpriser
                      styles:
                        card:
                          - background: none
                          - padding: 10px 0 10px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: custom:paper-buttons-row
                      view_layout:
                        grid-area: two
                      styles:
                        justify-content: center
                        margin: 0 auto 0 auto
                        width: max-content
                        background-color: var(--gray100)
                        border: 4px solid var(--gray100)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: I dag
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - idag: show
                                - imorgen: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: I morgen
                          ripple: none
                          entity: input_boolean.strompris_tilgjengelig
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - idag: hide
                                - imorgen: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: >-
                                {{ 'flex' if is_state(config.entity, 'on') else
                                'none' }}
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                - type: custom:gap-card
                  height: 12
                - type: custom:apexcharts-card
                  graph_span: 24h
                  experimental:
                    color_threshold: false
                  apex_config:
                    chart:
                      height: 300px
                    grid:
                      show: true
                      borderColor: var(--gray300)
                    markers:
                      size: 5
                      strokeColor: var(--gray200)
                      strokeWidth: 0
                      strokeOpacity: 0
                      hover:
                        size: 8
                  header:
                    show: false
                  span:
                    start: day
                    offset: +1d
                  yaxis:
                    - min: '|-0.1|'
                      max: '|+0.1|'
                      decimals: 1
                      show: true
                  all_series_config:
                    float_precision: 2
                  series:
                    - entity: sensor.nordpool_kwh_3_10_025
                      show:
                        extremas: true
                        in_header: false
                        name_in_header: true
                        in_chart: true
                      name: Spotpris nå
                      type: line
                      curve: straight
                      extend_to: end
                      stroke_width: 3
                      opacity: 1
                      color: var(--blue)
                      data_generator: |
                        return entity.attributes.raw_tomorrow.map((p) => {
                          return [new Date(p.start), p.value];
                          });        
        view_layout:
          grid-area: right
      - type: custom:mod-card
        card_mod:
          style: |

            @media (min-width:180px) {
              ha-card {
                z-index:6;
                position: fixed;
                background: var(--gray800);
                bottom: 10px;
                left: 10px;
                padding: 10px;
                border-radius: 100px;
                width: calc(100% - 20px);
              }
            }

            @media (min-width:801px)  {
              ha-card {
                left: calc(20% + 43px);
                width: calc(60% - 30px);
              }
            }    
        card:
          type: grid
          square: false
          columns: 6
          cards:
            - type: custom:button-card
              icon: mdi:vacuum-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#rolf'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:power-plug-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#strom'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:music
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#media'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:car-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#bil'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:server-outline
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#server'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
            - type: custom:button-card
              icon: mdi:tune-variant
              show_label: false
              show_state: false
              show_name: false
              tap_action:
                action: navigate
                navigation_path: '#settings'
              styles:
                icon:
                  - width: 24px
                  - color: var(--gray000)
                img_cell:
                  - width: 50px
                  - height: 50px
                card:
                  - background: none
                  - padding: 0
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Været
            icon: mdi:weather-partly-snowy-rainy
            state: null
            hash: '#weather'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: vertical-stack
            cards:
              - type: custom:gap-card
                height: 12
              - type: custom:local-conditional-card
                id: vaer_naa
                default: show
                card:
                  square: false
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: sensor.weather_now
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - vaer_naa: hide
                            - vaer_idag: show
                      show_icon: false
                      show_name: false
                      custom_fields:
                        cond: >
                          [[[ 

                          return entity.attributes.condition + '<span
                          style="padding-left:12px;">' +
                          entity.attributes.wind_desc + '<span
                          style="padding-left:12px; text-transform:lowercase">'
                          + entity.attributes.precipitation + ' mm'

                          ]]]
                        day: Været nå
                        temp: >
                          [[[ return entity.attributes.temperature + '°<span
                          style="font-size: 0.3em">' +
                          entity.attributes.feels_like + '°' ]]] 
                        icon: >
                          [[[ return '<img src = "' +
                          entity.attributes.cond_icon +  '" width="140"
                          height="140" />' ]]] 
                      styles:
                        grid:
                          - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                          - grid-template-columns: 1fr 1fr 1fr
                          - grid-template-rows: min-content 1fr min-content
                        card:
                          - background: var(--popupBG)
                          - padding: 24px
                          - height: 170px
                          - margin-bottom: 12px
                        custom_fields:
                          day:
                            - justify-self: start
                            - align-self: end
                            - font-size: 14px
                            - font-weight: 400
                            - color: var(--gray800)
                          cond:
                            - justify-self: start
                            - align-self: end
                            - text-transform: capitalize
                            - font-size: 14px
                            - font-weight: 400
                            - color: var(--gray800)
                          temp:
                            - justify-self: start
                            - text-align: left
                            - font-size: 3.4em
                            - line-height: 1em
                            - font-weight: 300
                            - padding: 12px 0 0 0
                            - color: var(--gray800)
                          icon:
                            - justify-self: end
                            - margin-top: 10px
                  columns: 1
              - type: custom:local-conditional-card
                id: vaer_idag
                default: hide
                card:
                  square: false
                  type: grid
                  cards:
                    - type: custom:button-card
                      entity: sensor.daily_weather
                      tap_action:
                        action: fire-dom-event
                        local_conditional_card:
                          action: set
                          ids:
                            - vaer_naa: show
                            - vaer_idag: hide
                      show_icon: false
                      show_name: false
                      custom_fields:
                        cond: >
                          [[[ 

                          return entity.attributes.condition + '<span
                          style="padding-left:12px;">' +
                          entity.attributes.wind_desc + '<span
                          style="padding-left:12px; text-transform:lowercase">'
                          + entity.attributes.precipitation + ' mm'

                          ]]]
                        day: Været i dag
                        temp: >
                          [[[ return entity.attributes.temperature + '°<span
                          style="font-size: 0.3em">' +
                          entity.attributes.feels_like + '°' ]]] 
                        icon: >
                          [[[ return '<img src = "' +
                          entity.attributes.cond_icon +  '" width="140"
                          height="140" />' ]]] 
                      styles:
                        grid:
                          - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                          - grid-template-columns: 1fr 1fr 1fr
                          - grid-template-rows: min-content 1fr min-content
                        card:
                          - background: var(--popupBG)
                          - padding: 24px
                          - height: 170px
                          - margin-bottom: 12px
                        custom_fields:
                          day:
                            - justify-self: start
                            - align-self: end
                            - font-size: 14px
                            - font-weight: 400
                            - color: var(--gray800)
                          cond:
                            - justify-self: start
                            - align-self: end
                            - text-transform: capitalize
                            - font-size: 14px
                            - font-weight: 400
                            - color: var(--gray800)
                          temp:
                            - justify-self: start
                            - text-align: left
                            - font-size: 3.4em
                            - line-height: 1em
                            - font-weight: 300
                            - padding: 12px 0 0 0
                            - color: var(--gray800)
                          icon:
                            - justify-self: end
                            - margin-top: 10px
                  columns: 1
              - type: custom:gap-card
                height: 20
              - type: custom:button-card
                entity: sensor.daily_weather
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 

                    return entity.attributes.condition1 + '<span
                    style="padding-left:12px; text-transform:lowercase">' +
                    entity.attributes.precipitation1 + ' mm'

                    ]]]
                  day: >
                    [[[  return
                    helpers.formatDateWeekday(entity.attributes.datetime1)
                    ]]]     
                  temp: |
                    [[[  return entity.attributes.temperature1 + '°' ]]]  
                  icon: |
                    [[[
                      var weather = entity.attributes.cond_icon1;
                      return '<img src = "' + weather + '" width="90" height="90" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--popupBG)
                    - padding: 24px
                    - height: 130px
                    - margin-bottom: 12px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - text-transform: capitalize;
                      - color: var(--gray800)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray800)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 2.2em
                      - line-height: 40px
                      - font-weight: 300
                      - color: var(--gray800)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
              - type: custom:button-card
                entity: sensor.daily_weather
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 


                    return entity.attributes.condition2 + '<span
                    style="padding-left:12px;text-transform:lowercase">' +
                    entity.attributes.precipitation2 + ' mm'


                    ]]]
                  day: >
                    [[[  return
                    helpers.formatDateWeekday(entity.attributes.datetime2)
                    ]]]     
                  temp: |
                    [[[  return entity.attributes.temperature2 + '°' ]]]  
                  icon: |
                    [[[
                      var weather = entity.attributes.cond_icon2;
                      return '<img src = "' + weather + '" width="90" height="90" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--popupBG)
                    - padding: 24px
                    - height: 130px
                    - margin-bottom: 12px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - text-transform: capitalize;
                      - color: var(--gray800)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray800)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 2.2em
                      - line-height: 40px
                      - font-weight: 300
                      - color: var(--gray800)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
              - type: custom:button-card
                entity: sensor.daily_weather
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 


                    return entity.attributes.condition3 + '<span
                    style="padding-left:12px;text-transform:lowercase">' +
                    entity.attributes.precipitation3 + ' mm'


                    ]]]
                  day: >
                    [[[  return
                    helpers.formatDateWeekday(entity.attributes.datetime3)
                    ]]]     
                  temp: |
                    [[[  return entity.attributes.temperature3 + '°' ]]]  
                  icon: |
                    [[[
                      var weather = entity.attributes.cond_icon3;
                      return '<img src = "' + weather + '" width="90" height="90" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--popupBG)
                    - padding: 24px
                    - height: 130px
                    - margin-bottom: 12px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - text-transform: capitalize;
                      - color: var(--gray800)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray800)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 2.2em
                      - line-height: 40px
                      - font-weight: 300
                      - color: var(--gray800)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
              - type: custom:button-card
                entity: sensor.daily_weather
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 


                    return entity.attributes.condition4 + '<span
                    style="padding-left:12px;text-transform:lowercase">' +
                    entity.attributes.precipitation4 + ' mm'


                    ]]]
                  day: >
                    [[[  return
                    helpers.formatDateWeekday(entity.attributes.datetime4)
                    ]]]     
                  temp: |
                    [[[  return entity.attributes.temperature4 + '°' ]]]  
                  icon: |
                    [[[
                      var weather = entity.attributes.cond_icon4;
                      return '<img src = "' + weather + '" width="90" height="90" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--popupBG)
                    - padding: 24px
                    - height: 130px
                    - margin-bottom: 12px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - text-transform: capitalize;
                      - color: var(--gray800)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray800)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 2.2em
                      - line-height: 40px
                      - font-weight: 300
                      - color: var(--gray800)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
              - type: custom:button-card
                entity: sensor.daily_weather
                show_icon: false
                show_name: false
                custom_fields:
                  cond: >
                    [[[ 


                    return entity.attributes.condition5 + '<span
                    style="padding-left:12px;text-transform:lowercase">' +
                    entity.attributes.precipitation5 + ' mm'


                    ]]]
                  day: >
                    [[[  return
                    helpers.formatDateWeekday(entity.attributes.datetime5)
                    ]]]     
                  temp: |
                    [[[  return entity.attributes.temperature5 + '°' ]]]  
                  icon: |
                    [[[
                      var weather = entity.attributes.cond_icon5;
                      return '<img src = "' + weather + '" width="90" height="90" />'
                    ]]]
                styles:
                  grid:
                    - grid-template-areas: '"day day icon" "temp . icon" "cond cond icon"'
                    - grid-template-columns: 1fr 1fr 1fr
                    - grid-template-rows: min-content 1fr min-content
                  card:
                    - background: var(--popupBG)
                    - padding: 24px
                    - height: 130px
                    - margin-bottom: 12px
                  custom_fields:
                    day:
                      - justify-self: start
                      - align-self: end
                      - font-size: 14px
                      - font-weight: 400
                      - text-transform: capitalize;
                      - color: var(--gray800)
                    cond:
                      - justify-self: start
                      - align-self: end
                      - text-transform: capitalize
                      - font-size: 14px
                      - font-weight: 400
                      - color: var(--gray800)
                    temp:
                      - justify-self: start
                      - text-align: left
                      - font-size: 2.2em
                      - line-height: 40px
                      - font-weight: 300
                      - color: var(--gray800)
                    icon:
                      - justify-self: end
                      - margin-top: 10px
              - type: custom:gap-card
                height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Media
            icon: mdi:television-classic
            state: null
            hash: '#media'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: media_musikk
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Musikk
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - media_tv: hide
                                - media_musikk: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                        - layout: name
                          name: TV
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - media_tv: show
                                - media_musikk: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background: none
                              border-radius: 24px
                    - type: custom:gap-card
                      height: 6
                    - type: custom:paper-buttons-row
                      styles:
                        gap: 8px
                        justify-content: flex-start
                        overflow: scroll
                        margin: 0 0 12px -18px
                        padding-left: 18px
                        width: calc(100% + 36px)
                      extra_styles: |
                        ::-webkit-scrollbar {
                          display: none;
                        }
                      buttons:
                        - name: Barn
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_barn
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                        - name: Rock
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_rock
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                        - name: Chill
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_chill
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                        - name: Party
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_party
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                        - name: Trening
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_trening
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                        - name: Old School
                          tap_action:
                            action: call-service
                            service: script.sonos_random_playlist_old_school
                          styles:
                            button:
                              width: 76px
                              height: 76px
                              flex-shrink: 0
                              margin-right: 36px
                              background-color: var(--popupBG)
                              border-radius: 24px
                              color: var(--gray800)
                            icon:
                              '--mdc-icon-size': 26px
                              color: var(--gray800)
                    - type: vertical-stack
                      cards:
                        - type: conditional
                          conditions:
                            - condition: and
                              conditions:
                                - condition: state
                                  entity: media_player.stue
                                  state: playing
                                - condition: state
                                  entity: media_player.stue_oppe
                                  state: playing
                          card:
                            type: custom:button-card
                            entity: media_player.stue
                            name: Sonos
                            show_icon: true
                            icon: mdi:speaker
                            entity_picture: |
                              [[[ 
                                return entity.attributes.entity_picture ; 
                              ]]] 
                            show_entity_picture: true
                            tap_action:
                              action: null
                            styles:
                              card:
                                - height: 66px
                                - border-radius: 75px
                                - padding: 4px 20px 4px 4px
                                - background: var(--gray800)
                                - margin-bottom: 12px
                              entity_picture:
                                - width: 100%
                                - height: auto
                              grid:
                                - grid-template-columns: 76px 1fr
                                - grid-template-areas: '"i state" "i n"'
                              icon:
                                - width: 30px
                                - color: var(--gray000)
                                - z-index: 1
                              img_cell:
                                - justify-self: start
                                - width: 30px
                                - height: 30px
                                - background: rgba(var(--highlight_active))
                                - padding: 14px
                                - border-radius: 50%
                                - z-index: 1
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - color: var(--black)
                                - opacity: 0.7
                                - padding-bottom: 7px
                                - z-index: 1
                              custom_fields:
                                img:
                                  - position: absolute
                                  - z-index: 0
                                  - opacity: 0.6
                                  - filter: blur(15px)
                                state:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--black)
                                  - z-index: 1
                            custom_fields:
                              img: >
                                [[[

                                return '<img src="' +
                                entity.attributes.entity_picture + '">'

                                ]]]    
                              state: |
                                [[[ 
                                  return entity.attributes.media_artist + ' - ' + entity.attributes.media_title;
                                ]]]
                        - type: conditional
                          conditions:
                            - condition: and
                              conditions:
                                - condition: state
                                  entity: media_player.stue_oppe
                                  state: playing
                                - condition: or
                                  conditions:
                                    - condition: state
                                      entity: media_player.stue
                                      state: paused
                                    - condition: state
                                      entity: media_player.stue
                                      state: 'off'
                                    - condition: state
                                      entity: media_player.stue
                                      state: idle
                                    - condition: state
                                      entity: media_player.stue
                                      state: standby
                                    - condition: state
                                      entity: media_player.stue
                                      state: unavailable
                          card:
                            type: custom:button-card
                            entity: media_player.stue_oppe
                            name: Sonos
                            show_icon: true
                            icon: mdi:speaker
                            entity_picture: |
                              [[[ 
                                return entity.attributes.entity_picture ; 
                              ]]] 
                            show_entity_picture: true
                            tap_action:
                              action: null
                            styles:
                              card:
                                - height: 66px
                                - border-radius: 75px
                                - padding: 4px 20px 4px 4px
                                - background: var(--gray800)
                                - margin-bottom: 12px
                              entity_picture:
                                - width: 100%
                                - height: auto
                              grid:
                                - grid-template-columns: 76px 1fr
                                - grid-template-areas: '"i state" "i n"'
                              icon:
                                - width: 30px
                                - color: var(--gray000)
                                - z-index: 1
                              img_cell:
                                - justify-self: start
                                - width: 30px
                                - height: 30px
                                - background: rgba(var(--highlight_active))
                                - padding: 14px
                                - border-radius: 50%
                                - z-index: 1
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - color: var(--black)
                                - opacity: 0.7
                                - padding-bottom: 7px
                                - z-index: 1
                              custom_fields:
                                img:
                                  - position: absolute
                                  - z-index: 0
                                  - opacity: 0.6
                                  - filter: blur(15px)
                                state:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--black)
                                  - z-index: 1
                            custom_fields:
                              img: >
                                [[[

                                return '<img src="' +
                                entity.attributes.entity_picture + '">'

                                ]]]    
                              state: |
                                [[[ 
                                  return entity.attributes.media_artist + ' - ' + entity.attributes.media_title;
                                ]]]
                        - type: conditional
                          conditions:
                            - condition: and
                              conditions:
                                - condition: state
                                  entity: media_player.stue
                                  state: playing
                                - condition: or
                                  conditions:
                                    - condition: state
                                      entity: media_player.stue_oppe
                                      state: paused
                                    - condition: state
                                      entity: media_player.stue_oppe
                                      state: 'off'
                                    - condition: state
                                      entity: media_player.stue_oppe
                                      state: idle
                                    - condition: state
                                      entity: media_player.stue_oppe
                                      state: standby
                                    - condition: state
                                      entity: media_player.stue_oppe
                                      state: unavailable
                          card:
                            type: custom:button-card
                            entity: media_player.stue
                            name: Sonos
                            show_icon: true
                            icon: mdi:speaker
                            entity_picture: |
                              [[[ 
                                return entity.attributes.entity_picture ; 
                              ]]] 
                            show_entity_picture: true
                            tap_action:
                              action: null
                            styles:
                              card:
                                - height: 66px
                                - border-radius: 75px
                                - padding: 4px 20px 4px 4px
                                - background: var(--gray800)
                                - margin-bottom: 12px
                              entity_picture:
                                - width: 100%
                                - height: auto
                              grid:
                                - grid-template-columns: 76px 1fr
                                - grid-template-areas: '"i state" "i n"'
                              icon:
                                - width: 30px
                                - color: var(--gray000)
                                - z-index: 1
                              img_cell:
                                - justify-self: start
                                - width: 30px
                                - height: 30px
                                - background: rgba(var(--highlight_active))
                                - padding: 14px
                                - border-radius: 50%
                                - z-index: 1
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - color: var(--black)
                                - opacity: 0.7
                                - padding-bottom: 7px
                                - z-index: 1
                              custom_fields:
                                img:
                                  - position: absolute
                                  - z-index: 0
                                  - opacity: 0.6
                                  - filter: blur(15px)
                                state:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--black)
                                  - z-index: 1
                            custom_fields:
                              img: >
                                [[[

                                return '<img src="' +
                                entity.attributes.entity_picture + '">'

                                ]]]    
                              state: |
                                [[[ 
                                  return entity.attributes.media_artist + ' - ' + entity.attributes.media_title;
                                ]]]
                    - type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            gap: 8px
                            flex-wrap: nowrap;
                            margin-top: 16px
                            margin-bottom: 20px
                            justify-content: center;
                            align-items: center;
                            align-content: center;
                            width: 100%
                          buttons:
                            - icon: >-
                                {% if (state_attr('media_player.stue_oppe',
                                'repeat') == 'off') or
                                (state_attr('media_player.stue', 'repeat') ==
                                'off') %}
                                  mdi:repeat-off
                                {% else %}
                                  mdi:repeat-variant
                                {% endif %}  
                              tap_action:
                                action: call-service
                                service: script.sonos_nede_repeat
                              styles:
                                button:
                                  width: 40px
                                  height: 40px
                                  flex-shrink: 0
                                  background: none
                                icon:
                                  '--mdc-icon-size': 26px
                                  color: var(--gray800)
                            - icon: mdi:skip-backward
                              tap_action:
                                action: call-service
                                service: script.sonos_nede_previous
                              styles:
                                button:
                                  width: 46px
                                  height: 46px
                                  flex-shrink: 0
                                  background: none
                                icon:
                                  '--mdc-icon-size': 36px
                                  color: var(--gray800)
                            - icon: >-
                                {% if states('media_player.stue_oppe') ==
                                'playing' or states('media_player.stue') ==
                                'playing' %}
                                  mdi:pause
                                {% else %}
                                  mdi:play
                                {% endif %}
                              tap_action:
                                action: call-service
                                service: script.sonos_nede_play_pause
                              styles:
                                button:
                                  width: 76px
                                  height: 76px
                                  flex-shrink: 0
                                  background: var(--active-big)
                                  border-radius: 50%
                                icon:
                                  '--mdc-icon-size': 26px
                                  color: var(--black)
                            - icon: mdi:skip-forward
                              tap_action:
                                action: call-service
                                service: script.sonos_nede_next
                              styles:
                                button:
                                  width: 46px
                                  height: 46px
                                  flex-shrink: 0
                                icon:
                                  '--mdc-icon-size': 36px
                                  color: var(--gray800)
                            - icon: >-
                                {% if (state_attr('media_player.stue_oppe',
                                'shuffle') == false) or
                                (state_attr('media_player.stue', 'shuffle') ==
                                false) %}
                                  mdi:shuffle-disabled
                                {% else %}
                                  mdi:shuffle-variant
                                {% endif %}  
                              tap_action:
                                action: call-service
                                service: script.sonos_nede_shuffle
                              styles:
                                button:
                                  width: 40px
                                  height: 40px
                                  flex-shrink: 0
                                  background: none
                                icon:
                                  '--mdc-icon-size': 26px
                                  color: var(--gray800)
                        - type: custom:layout-card
                          layout_type: custom:grid-layout
                          layout:
                            grid-template-columns: 70px 1fr 70px
                            grid-template-areas: |
                              "one two three"  
                          cards:
                            - type: custom:button-card
                              view_layout:
                                grid-area: one
                              name: Nede
                              entity: input_boolean.sonos_group_nede
                              tap_action:
                                action: toggle
                              show_icon: false
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: Black
                                    img_cell:
                                      - background: var(--black)
                                    icon:
                                      - color: var(--white)
                              styles:
                                card:
                                  - background: none
                                  - margin-left: '-6px'
                                  - padding: 6px 12px
                                  - overflow: visible
                                  - '--mdc-ripple-press-opacity': 0
                                name:
                                  - font-size: 14px
                                  - font-weight: 500
                                  - align-self: center
                            - type: custom:my-slider-v2
                              view_layout:
                                grid-area: two
                              entity: media_player.stue
                              mode: volume
                              allowTapping: false
                              allowSliding: true
                              styles:
                                container:
                                  - overflow: visible
                                  - margin-top: 10px
                                card:
                                  - background: var(--popupBG)
                                  - border-radius: 4px
                                  - height: 8px
                                progress:
                                  - background: var(--active-big)
                                  - border-radius: 4px
                                thumb:
                                  - width: 18px
                                  - height: 18px
                                  - top: '-5px'
                                  - margin-right: '-4px'
                                  - border-radius: 50%
                                  - background: var(--gray800)
                                track:
                                  - background: none
                            - type: custom:button-card
                              view_layout:
                                grid-area: three
                              entity: media_player.stue
                              name: >-
                                [[[ return
                                Math.floor(entity.attributes.volume_level*100) +
                                '%' ]]]
                              show_icon: false
                              styles:
                                card:
                                  - background: none
                                  - padding: 6px 0
                                  - overflow: visible
                                name:
                                  - font-size: 14px
                                  - font-weight: 500
                        - type: custom:layout-card
                          layout_type: custom:grid-layout
                          layout:
                            grid-template-columns: 70px 1fr 70px
                            grid-template-areas: |
                              "one two three"
                          cards:
                            - type: custom:button-card
                              view_layout:
                                grid-area: one
                              name: Oppe
                              entity: input_boolean.sonos_group_oppe
                              tap_action:
                                action: toggle
                              show_icon: false
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: Black
                                    img_cell:
                                      - background: var(--black)
                                    icon:
                                      - color: var(--white)
                              styles:
                                card:
                                  - background: none
                                  - margin-left: '-6px'
                                  - padding: 6px 12px
                                  - overflow: visible
                                  - '--mdc-ripple-press-opacity': 0
                                name:
                                  - font-size: 14px
                                  - font-weight: 500
                                  - align-self: center
                            - type: custom:my-slider-v2
                              view_layout:
                                grid-area: two
                              entity: media_player.stue_oppe
                              mode: volume
                              allowTapping: false
                              allowSliding: true
                              styles:
                                container:
                                  - overflow: visible
                                  - margin-top: 10px
                                card:
                                  - background: var(--popupBG)
                                  - border-radius: 4px
                                  - height: 8px
                                progress:
                                  - background: var(--active-big)
                                  - border-radius: 4px
                                thumb:
                                  - width: 18px
                                  - height: 18px
                                  - top: '-5px'
                                  - margin-right: '-4px'
                                  - border-radius: 50%
                                  - background: var(--gray800)
                                track:
                                  - background: none
                            - type: custom:button-card
                              view_layout:
                                grid-area: three
                              entity: media_player.stue_oppe
                              name: >-
                                [[[ return
                                Math.floor(entity.attributes.volume_level*100) +
                                '%' ]]]
                              show_icon: false
                              styles:
                                card:
                                  - background: none
                                  - padding: 6px 0
                                  - overflow: visible
                                name:
                                  - font-size: 14px
                                  - font-weight: 500
                        - type: custom:gap-card
                          height: 48
                    - type: custom:button-card
                      entity: input_boolean.disco_toggle
                      triggers_update: all
                      name: Disko
                      show_icon: true
                      icon: mdi:alarm-light-outline
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          custom_fields:
                            state: Diskolys er på
                          styles:
                            card:
                              - background: var(--active-big)
                              - margin-bottom: 12px
                            name:
                              - color: var(--black)
                            label:
                              - color: var(--black)
                            custom_fields:
                              state:
                                - color: var(--black)
                            icon:
                              - color: var(--black)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                        - value: 'off'
                          custom_fields:
                            state: Disko er av
                          styles:
                            card:
                              - background: var(--gray800)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                            icon:
                              - color: var(--gray000)
                            name:
                              - color: var(--gray000)
                            custom_fields:
                              state:
                                - color: var(--gray000)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--popupBG)
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--gray800)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--gray800)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--gray800)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--gray000); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: input_boolean.disco_toggle
                          state: 'on'
                      card:
                        square: true
                        type: grid
                        cards:
                          - type: custom:button-card
                            name: 1
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_1
                            state:
                              - value: Nice1
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 2
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_2
                            state:
                              - value: Nice2
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 3
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_3
                            state:
                              - value: Nice3
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 4
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_4
                            state:
                              - value: Nice4
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                          - type: custom:button-card
                            name: 5
                            aspect_ratio: 1/1
                            show_icon: false
                            entity: select.wled_audio_sjenk_preset
                            tap_action:
                              action: perform-action
                              perform_action: script.disco_preset_5
                            state:
                              - value: Nice5
                                styles:
                                  name:
                                    - color: var(--black)
                                  card:
                                    - background: var(--active-big)
                            styles:
                              card:
                                - background: var(--gray800)
                              name:
                                - font-size: 16px
                                - font-weight: 500
                                - color: var(--gray000)
                                - padding: 2px 0px
                        columns: 5
              - type: custom:local-conditional-card
                id: media_tv
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Musikk
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - media_tv: hide
                                - media_musikk: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: TV
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - media_tv: show
                                - media_musikk: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      view_layout:
                        grid-area: tvtid
                      show_icon: false
                      entity: sensor.tv_tid2
                      tap_action:
                        action: none
                      name: >
                        [[[  return '<span style="font-weight: 300; font-size:
                        14px">TV denne uka:</span><br>' + 'Barna: ' +
                        entity.attributes.barn_uke + '<br> Voksne: ' +
                        entity.attributes.voksne_uke ]]]
                      custom_fields:
                        mn: >
                          [[[  return '<span style="font-weight: 300; font-size:
                          14px">TV denne måned:</span><br>' + 'Barna: ' +
                          entity.attributes.barn_maned + '<br> Voksne: ' +
                          entity.attributes.voksne_maned ]]]
                      styles:
                        grid:
                          - grid-template-columns: 1fr 1fr
                          - grid-template-areas: '"n mn" "n mn"'
                        name:
                          - justify-self: start
                          - text-align: left
                          - font-size: 16px
                          - line-height: 22px
                          - font-weight: 500
                          - color: var(--gray800)
                        card:
                          - padding: 20px 30px
                          - margin-bottom: 12px
                          - height: 100%
                          - background: var(--popupBG)
                        icon:
                          - width: 30px
                          - color: var(--gray800)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - padding: 14px
                          - border-radius: 50%
                        custom_fields:
                          mn:
                            - justify-self: start
                            - text-align: left
                            - font-size: 16px
                            - line-height: 22px
                            - font-weight: 500
                            - color: var(--gray800)
                    - type: custom:button-card
                      entity: media_player.samsung_tv2
                      name: TV
                      show_icon: true
                      icon: mdi:television-classic
                      tap_action:
                        action: toggle
                      state:
                        - value: 'on'
                          styles:
                            card:
                              - background: var(--active-big)
                          custom_fields:
                            state: >
                              [[[ return 'Ser på ' +
                              states['media_player.samsung_tv2'].attributes.source]]]
                        - value: 'off'
                          custom_fields:
                            state: TV er av
                          styles:
                            card:
                              - background: var(--gray800)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                            icon:
                              - color: var(--gray000)
                            name:
                              - color: var(--gray000)
                            custom_fields:
                              state:
                                - color: var(--gray000)
                      styles:
                        card:
                          - height: 66px
                          - border-radius: 75px
                          - padding: 4px 20px 4px 4px
                          - background: var(--popupBG)
                          - margin-bottom: '-8px'
                        grid:
                          - grid-template-columns: 76px 1fr min-content
                          - grid-template-areas: '"i state icon" "i n icon"'
                        icon:
                          - width: 30px
                          - color: var(--black)
                        img_cell:
                          - justify-self: start
                          - width: 30px
                          - height: 30px
                          - background: rgba(var(--highlight_active))
                          - padding: 14px
                          - border-radius: 50%
                        name:
                          - justify-self: start
                          - font-size: 14px
                          - color: var(--black)
                          - opacity: 0.7
                          - padding-bottom: 7px
                        custom_fields:
                          icon: null
                          state:
                            - justify-self: start
                            - font-size: 16px
                            - padding-top: 4px
                            - font-weight: 500
                            - color: var(--black)
                      custom_fields:
                        icon: |
                          [[[
                           var state = entity.state;
                           if(state == "on")
                            return `<ha-icon
                            icon="mdi:toggle-switch"
                            style="color: var(--black); width:50px; height:40px;">
                            </ha-icon>
                            `;
                           else 
                            return `<ha-icon
                            icon="mdi:toggle-switch-off"
                            style="color: var(--gray000); width:50px; height:40px;">
                            </ha-icon>
                            `;
                          ]]]
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: media_player.samsung_tv2
                          state: 'on'
                      card:
                        type: custom:layout-card
                        layout_type: custom:grid-layout
                        cards:
                          - type: custom:button-card
                            view_layout:
                              grid-area: nav1
                            icon: mdi:chevron-up
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_up
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: none
                                - margin-top: '-8px'
                              icon:
                                - width: 32px
                                - height: 32px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: nav2
                            icon: mdi:chevron-left
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_left
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: none
                              icon:
                                - width: 32px
                                - height: 32px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: nav3
                            icon: mdi:checkbox-blank-circle-outline
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_enter
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: none
                              icon:
                                - width: 22px
                                - height: 22px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: nav4
                            icon: mdi:chevron-right
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_right
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: none
                              icon:
                                - width: 32px
                                - height: 32px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: nav5
                            icon: mdi:chevron-down
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_down
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: none
                              icon:
                                - width: 32px
                                - height: 32px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: btn1
                            icon: mdi:arrow-left
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_return
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: var(--popupBG)
                                - border-radius: 50%
                                - margin-top: '-33px'
                              icon:
                                - width: 24px
                                - height: 24px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: btn2
                            icon: mdi:home-outline
                            tap_action:
                              action: perform-action
                              perform_action: script.tv_key_exit
                              target: {}
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: var(--popupBG)
                                - border-radius: 50%
                              icon:
                                - width: 24px
                                - height: 24px
                                - color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: btn3
                            icon: mdi:apps
                            tap_action:
                              action: fire-dom-event
                              local_conditional_card:
                                action: set
                                ids:
                                  - colors: hide
                                  - channels: show
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: var(--popupBG)
                                - border-radius: 50%
                                - margin-top: '-33px'
                              icon:
                                - width: 24px
                                - height: 24px
                                - color: var(--gray800)
                          - type: custom:paper-buttons-row
                            view_layout:
                              grid-area: vol
                            styles:
                              width: 100%
                              margin: 12px 0 0 0
                              background-color: var(--popupBG)
                              border-radius: 66px
                            buttons:
                              - layout: icon
                                icon: mdi:volume-minus
                                ripple: none
                                tap_action:
                                  action: call-service
                                  service: script.tv_volum_ned2
                                  target: {}
                                styles:
                                  button:
                                    width: 66px
                                    height: 66px
                                    padding: 0
                                    color: var(--gray800)
                              - layout: icon
                                icon: mdi:volume-variant-off
                                tap_action:
                                  action: call-service
                                  service: script.tv_volum_mute
                                  target: {}
                                ripple: none
                                styles:
                                  button:
                                    width: 66px
                                    height: 66px
                                    padding: 0
                                    color: var(--gray800)
                              - layout: icon
                                icon: mdi:volume-plus
                                ripple: none
                                tap_action:
                                  action: call-service
                                  service: script.tv_volum_opp
                                  target: {}
                                styles:
                                  button:
                                    width: 66px
                                    height: 66px
                                    padding: 0
                                    color: var(--gray800)
                          - type: custom:button-card
                            view_layout:
                              grid-area: btn4
                            icon: mdi:microphone-outline
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: var(--popupBG)
                                - border-radius: 50%
                                - margin-top: '-33px'
                              icon:
                                - width: 24px
                                - height: 24px
                          - type: custom:button-card
                            view_layout:
                              grid-area: btn5
                            icon: mdi:dots-horizontal
                            tap_action:
                              action: fire-dom-event
                              local_conditional_card:
                                action: set
                                ids:
                                  - colors: show
                                  - channels: hide
                            styles:
                              card:
                                - width: 66px
                                - height: 66px
                                - background: var(--popupBG)
                                - border-radius: 50%
                                - margin-top: '-33px'
                              icon:
                                - width: 24px
                                - height: 24px
                          - type: custom:local-conditional-card
                            id: channels
                            default: show
                            card:
                              square: false
                              type: grid
                              columns: 1
                              cards:
                                - type: custom:button-card
                                  name: unraid
                                  tap_action:
                                    action: perform-action
                                    perform_action: media_player.select_source
                                    target:
                                      entity_id: media_player.samsung_tv2
                                    data:
                                      source: unraid
                                  entity: media_player.samsung_tv2
                                  show_icon: false
                                  styles:
                                    name:
                                      - color: |
                                          [[[
                                            if (entity.attributes.source === 'unraid') {
                                              return 'var(--black)';
                                            } else {
                                              return 'var(--gray800)';
                                            }
                                          ]]]
                                    card:
                                      - background: |
                                          [[[
                                            if (entity.attributes.source === 'unraid') {
                                              return 'var(--active-big)';
                                            } else {
                                              return 'var(--popupBG)';
                                            }
                                          ]]]
                                      - padding: 10px 20px
                                      - margin-top: 44px
                                - type: custom:button-card
                                  name: NRK
                                  tap_action:
                                    action: perform-action
                                    perform_action: media_player.select_source
                                    target:
                                      entity_id: media_player.samsung_tv2
                                    data:
                                      source: NRK TV
                                  entity: media_player.samsung_tv2
                                  show_icon: false
                                  styles:
                                    name:
                                      - color: |
                                          [[[
                                            if (entity.attributes.source === 'NRK TV') {
                                              return 'var(--black)';
                                            } else {
                                              return 'var(--gray800)';
                                            }
                                          ]]]
                                    card:
                                      - background: |
                                          [[[
                                            if (entity.attributes.source === 'NRK TV') {
                                              return 'var(--active-big)';
                                            } else {
                                              return 'var(--popupBG)';
                                            }
                                          ]]]
                                      - padding: 10px 20px
                                - type: custom:button-card
                                  name: NRK Super
                                  tap_action:
                                    action: perform-action
                                    perform_action: media_player.select_source
                                    target:
                                      entity_id: media_player.samsung_tv2
                                    data:
                                      source: NRK Super
                                  entity: media_player.samsung_tv2
                                  show_icon: false
                                  styles:
                                    name:
                                      - color: |
                                          [[[
                                            if (entity.attributes.source === 'NRK Super') {
                                              return 'var(--black)';
                                            } else {
                                              return 'var(--gray800)';
                                            }
                                          ]]]
                                    card:
                                      - background: |
                                          [[[
                                            if (entity.attributes.source === 'NRK Super') {
                                              return 'var(--active-big)';
                                            } else {
                                              return 'var(--popupBG)';
                                            }
                                          ]]]
                                      - padding: 10px 20px
                                - type: custom:button-card
                                  name: TV 2
                                  tap_action:
                                    action: perform-action
                                    perform_action: media_player.select_source
                                    target:
                                      entity_id: media_player.samsung_tv2
                                    data:
                                      source: TV 2 Play
                                  entity: media_player.samsung_tv2
                                  show_icon: false
                                  styles:
                                    name:
                                      - color: |
                                          [[[
                                            if (entity.attributes.source === 'TV 2 Play') {
                                              return 'var(--black)';
                                            } else {
                                              return 'var(--gray800)';
                                            }
                                          ]]]
                                    card:
                                      - background: |
                                          [[[
                                            if (entity.attributes.source === 'TV 2 Play') {
                                              return 'var(--active-big)';
                                            } else {
                                              return 'var(--popupBG)';
                                            }
                                          ]]]
                                      - padding: 10px 20px
                                - type: custom:button-card
                                  name: Spotify
                                  tap_action:
                                    action: perform-action
                                    perform_action: media_player.select_source
                                    target:
                                      entity_id: media_player.samsung_tv2
                                    data:
                                      source: Spotify - Music and Podcasts
                                  entity: media_player.samsung_tv2
                                  show_icon: false
                                  styles:
                                    name:
                                      - color: |
                                          [[[
                                            if (entity.attributes.source === 'Spotify - Music and Podcasts') {
                                              return 'var(--black)';
                                            } else {
                                              return 'var(--gray800)';
                                            }
                                          ]]]
                                    card:
                                      - background: |
                                          [[[
                                            if (entity.attributes.source === 'Spotify - Music and Podcasts') {
                                              return 'var(--active-big)';
                                            } else {
                                              return 'var(--popupBG)';
                                            }
                                          ]]]
                                      - padding: 10px 20px
                            view_layout:
                              grid-area: chan
                          - type: custom:local-conditional-card
                            id: colors
                            default: hide
                            card:
                              square: false
                              type: grid
                              columns: 1
                              cards:
                                - type: custom:button-card
                                  styles:
                                    card:
                                      - background: var(--red)
                                      - width: 42px
                                      - height: 42px
                                      - margin-top: 12px
                                - type: custom:button-card
                                  styles:
                                    card:
                                      - background: var(--blue)
                                      - width: 42px
                                      - height: 42px
                                - type: custom:button-card
                                  styles:
                                    card:
                                      - background: var(--green)
                                      - width: 42px
                                      - height: 42px
                                - type: custom:button-card
                                  styles:
                                    card:
                                      - background: var(--yellow)
                                      - width: 42px
                                      - height: 42px
                            view_layout:
                              grid-area: chan
                        layout:
                          grid-template-columns: 40% 1fr min-content min-content min-content
                          grid-template-areas: |
                            "chan . . nav1 ."
                            "chan . nav2 nav3 nav4"
                            "chan . . nav5 ."
                            "chan . btn1 btn2 btn3"  
                            "chan . btn4 . btn5"  
                            "chan . vol vol vol"   
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Søppeltømming
            icon: mdi:trash-can
            state: null
            hash: '#soppel'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:button-card
                template: sensor_small
                entity: sensor.restavfall
                variables:
                  name: Restavfall
                  icon: mdi:trash-can
                  background: var(--popupBG)
                  label: |
                    [[[
                      if (entity.attributes.days_to_pickup == "0") return "Idag";
                      else return 'Om ' + entity.attributes.days_to_pickup+ ' dager';
                    ]]]
              - type: custom:button-card
                template: sensor_small
                entity: sensor.papp_og_papir
                variables:
                  name: Papir & Papp
                  icon: mdi:paper-roll
                  background: var(--popupBG)
                  label: |
                    [[[
                      if (entity.attributes.days_to_pickup == "0") return "Idag";
                      else return 'Om ' + entity.attributes.days_to_pickup+ ' dager';
                    ]]]
              - type: custom:button-card
                template: sensor_small
                entity: sensor.plastemballasje
                variables:
                  name: Plastavfall
                  icon: mdi:recycle
                  background: var(--popupBG)
                  label: |
                    [[[
                      if (entity.attributes.days_to_pickup == "0") return "Idag";
                      else return 'Om ' + entity.attributes.days_to_pickup+ ' dager';
                    ]]]
              - type: custom:button-card
                template: sensor_small
                entity: sensor.glass_og_metallemballasje
                variables:
                  name: Glass & Metall
                  icon: mdi:glass-fragile
                  background: var(--popupBG)
                  label: |
                    [[[
                      if (entity.attributes.days_to_pickup == "0") return "Idag";
                      else return 'Om ' + entity.attributes.days_to_pickup+ ' dager';
                    ]]]
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Innstillinger
            icon: mdi:cog
            state: null
            hash: '#settings'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 60% 1fr
              grid-template-areas: |
                "one two"  
            cards:
              - type: custom:button-card
                view_layout:
                  grid-area: one
                template: button_toggle
                tap_action:
                  action: toggle
                variables:
                  name: Feriemodus
                  icon: mdi:airplane-takeoff
                  entity: input_boolean.feriemodus
              - type: custom:button-card
                view_layout:
                  grid-area: two
                template: button_toggle
                tap_action:
                  action: toggle
                variables:
                  name: Gjestemodus
                  icon: mdi:account-supervisor
                  entity: input_boolean.gjestemodus
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: automasjoner
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 12px auto 12px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Automasjoner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: show
                                - push: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Push varsler
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: hide
                                - push: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - square: false
                      columns: 1
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Automatiske lys ved bevegelse
                            label: Kjøkken
                            icon: mdi:ceiling-light-multiple
                            entity: input_boolean.automation_motion_kitchen_main
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Låse inngangdør automatisk
                            label: Dørlås
                            icon: mdi:ceiling-light-multiple
                            entity: input_boolean.automation_motion_kitchen_main
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Skru av varmeovner ved 5kWh
                            label: Strømsparing
                            icon: mdi:ceiling-light-multiple
                            entity: input_boolean.stromsparemodus
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Spisebord og gang hver dag
                            label: Rolf
                            icon: mdi:vacuum
                            entity: input_boolean.automation_rolf
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Automatiske lys ved bevegelse
                            label: Gang
                            icon: mdi:ceiling-light-multiple
                            entity: input_boolean.automation_gang_motion
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Meldinger på tlf ved bevegelse
                            label: Ringeklokke
                            icon: mdi:doorbell
                            entity: input_boolean.automation_ringeklokke_notifications
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Automatisk av/på
                            label: Varmeovn oppe
                            icon: mdi:heating-coil
                            entity: input_boolean.automation_stue_oppe_varmeovn
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Lys på ved solnedgang
                            label: Under trapp
                            icon: mdi:lamp
                            entity: input_boolean.automation_lys_under_trapp
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Av/på med sola
                            label: Lys ute
                            icon: mdi:coach-lamp
                            entity: input_boolean.automation_lys_ute
                        - type: custom:button-card
                          template: button_toggle_small
                          tap_action:
                            action: toggle
                          variables:
                            name: Av kl 23, på kl 6.30
                            label: Magic Mirror
                            icon: mdi:mirror-rectangle
                            entity: input_boolean.automation_magicmirror
                        - type: custom:gap-card
                          height: 36
              - type: custom:local-conditional-card
                id: push
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 12px auto 12px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Automasjoner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: show
                                - push: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Push varsler
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - automasjoner: hide
                                - push: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - square: false
                      columns: 1
                      type: grid
                      visibility:
                        - condition: user
                          users:
                            - 9f7239064a602b
                      cards:
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: Alle varsler
                            icon: mdi:cellphone
                            entity: input_boolean.tlf_ikke_forstyrr
                    - square: false
                      columns: 1
                      type: grid
                      visibility:
                        - condition: user
                          users:
                            - ed472ae94cd838b2
                      cards:
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: Alle varsler
                            icon: mdi:cellphone
                            entity: input_boolean.tlf_yoikke_forstyrr
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Rolf
            icon: mdi:vacuum
            state: null
            hash: '#rolf'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              }

              .bubble-sub-button {
                font-weight: 300;
                font-size: 14px
              }

              #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 22px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            show_header: true
            show_attribute: true
            attribute: battery_level
            sub_button:
              - show_background: false
                entity: vacuum.rolf
                show_state: true
                icon: mdi:none
                show_attribute: true
                attribute: battery_level
                show_last_changed: false
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: soner
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Soner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: show
                                - kontroll: hide
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: show
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: show
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kart
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: hide
                                - kart: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: custom:layout-card
                      layout_type: custom:grid-layout
                      layout:
                        grid-template-columns: 1fr 1fr
                        grid-template-rows: 150px 75px 75px 150px
                        grid-template-areas: |
                          "stue gang"
                          "stue kjokken"
                          "spise kjokken"
                          "spise bad"
                      cards:
                        - type: custom:button-card
                          view_layout:
                            grid-area: stue
                          template: sensor_big
                          entity: input_boolean.rolf_rom_stue
                          show_name: false
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                          variables:
                            label: Stue
                            icon: mdi:sofa
                            background: var(--popupBG)
                        - type: custom:button-card
                          view_layout:
                            grid-area: spise
                          template: sensor_big
                          entity: input_boolean.rolf_rom_spisebord
                          show_name: false
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                          variables:
                            label: Spisebord
                            icon: mdi:table-furniture
                            background: var(--popupBG)
                        - type: custom:button-card
                          view_layout:
                            grid-area: kjokken
                          template: sensor_big
                          entity: input_boolean.rolf_rom_kjokken
                          show_name: false
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                          variables:
                            label: Kjøkken
                            icon: mdi:silverware-fork-knife
                            background: var(--popupBG)
                        - type: custom:button-card
                          view_layout:
                            grid-area: gang
                          template: sensor_big
                          entity: input_boolean.rolf_rom_gang
                          show_name: false
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                          variables:
                            label: Gang
                            icon: mdi:door
                            background: var(--popupBG)
                        - type: custom:button-card
                          view_layout:
                            grid-area: bad
                          template: sensor_big
                          entity: input_boolean.rolf_rom_bad
                          show_name: false
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                          variables:
                            label: Bad
                            icon: mdi:shower-head
                            background: var(--popupBG)
                    - square: false
                      type: grid
                      cards:
                        - type: custom:gap-card
                          height: 0
                        - type: custom:button-card
                          template: sensor_big
                          entity: script.rolf_start_barebones
                          show_name: false
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 150px
                            label:
                              - color: var(--black)
                            name:
                              - color: var(--black)
                            icon:
                              - color: var(--black)
                          variables:
                            label: |
                              [[[
                                if (states['sensor.rolf_all'].state == 'False')
                                  return "Støvsug alt";
                                else
                                  return "Start";
                              ]]]
                            icon: mdi:vacuum
                            background: var(--green)
                        - type: custom:gap-card
                          height: 12
                      columns: 1
              - type: custom:local-conditional-card
                id: kontroll
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Soner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: show
                                - kontroll: hide
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: show
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: show
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kart
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: hide
                                - kart: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          entity: script.rolf_set_fan_speed
                          tap_action:
                            action: toggle
                          styles:
                            card:
                              - height: 100%
                            label:
                              - text-transform: capitalize
                          variables:
                            name: Viftehastighet
                            label: |
                              [[[
                                return states['vacuum.rolf'].attributes.fan_speed
                              ]]]   
                            icon: mdi:fan
                            background: var(--popupBG)
                        - type: grid
                          square: false
                          columns: 1
                          cards:
                            - type: custom:button-card
                              template: sensor_small
                              entity: script.rolf_mop_mode
                              tap_action:
                                action: toggle
                              styles:
                                label:
                                  - text-transform: capitalize
                              variables:
                                name: Mopp modus
                                label: |
                                  [[[
                                    return states['select.rolf_mop_mode'].state
                                  ]]]   
                                icon: mdi:broom
                                background: var(--popupBG)
                            - type: custom:button-card
                              template: sensor_small
                              entity: script.rolf_mop_intensity
                              tap_action:
                                action: toggle
                              styles:
                                label:
                                  - text-transform: capitalize
                              variables:
                                name: Mopp intensitet
                                label: |
                                  [[[
                                    return states['select.rolf_mop_intensity'].state
                                  ]]]   
                                icon: mdi:tune-variant
                                background: var(--popupBG)
                    - type: custom:gap-card
                      height: 12
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          entity: vacuum.rolf
                          state:
                            - value: paused
                              icon: mdi:play
                              name: Fortsett
                              styles:
                                card:
                                  - background: var(--green)
                          template: button_trigger
                          tap_action:
                            action: call-service
                            service: script.rolf_play_pause
                            target: {}
                          variables:
                            icon: mdi:pause
                            name: Pause
                            background: var(--red)
                        - type: custom:button-card
                          template: button_trigger
                          variables:
                            icon: mdi:home
                            name: |
                              [[[
                                return 'Returner<br>hjem'
                              ]]]
                            entity: script.rolf_avbryt
                            background: var(--orange)
                          tap_action:
                            action: toggle
                        - type: custom:button-card
                          template: button_trigger
                          variables:
                            icon: mdi:delete-empty
                            name: |
                              [[[
                                return 'Tøm<br>støvsuger'
                              ]]]
                            background: var(--gray800)
                            text: var(--gray000)
                          tap_action:
                            action: call-service
                            service: vacuum.send_command
                            target:
                              entity_id: vacuum.rolf
                            data:
                              command: app_goto_target
                              params:
                                - 28600
                                - 27000
                      columns: 3
              - type: custom:local-conditional-card
                id: info
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Soner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: show
                                - kontroll: hide
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: show
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: show
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kart
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: hide
                                - kart: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_small
                          hold_action:
                            action: call-service
                            service: button.press
                            target:
                              entity_id: button.rolf_reset_main_brush_consumable
                          variables:
                            name: Hovedbørste
                            icon: mdi:broom
                            background: var(--popupBG)
                            label: |
                              [[[
                                return Math.round(states['sensor.rolf_main_brush_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]]             
                        - type: custom:button-card
                          template: sensor_small
                          hold_action:
                            action: call-service
                            service: button.press
                            target:
                              entity_id: button.rolf_reset_air_filter_consumable
                          variables:
                            name: Filter
                            icon: mdi:air-filter
                            background: var(--popupBG)
                            label: |
                              [[[
                                return Math.round(states['sensor.rolf_filter_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]]        
                        - type: custom:button-card
                          template: sensor_small
                          hold_action:
                            action: call-service
                            service: button.press
                            target:
                              entity_id: button.rolf_reset_sensor_consumable
                          variables:
                            name: Sensor
                            icon: mdi:eye-outline
                            background: var(--popupBG)
                            label: |
                              [[[
                                return Math.round(states['sensor.rolf_sensor_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]] 
                        - type: custom:button-card
                          template: sensor_small
                          hold_action:
                            action: call-service
                            service: button.press
                            target:
                              entity_id: button.rolf_reset_side_brush_consumable
                          variables:
                            name: Sidebørste
                            icon: mdi:brush
                            background: var(--popupBG)
                            label: |
                              [[[
                                return Math.round(states['sensor.rolf_side_brush_time_left'].state / 60 / 60) + ' timer igjen'
                              ]]] 
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Rengjort område
                            icon: mdi:texture-box
                            background: var(--popupBG)
                            label: |
                              [[[
                                return Math.round(states['sensor.rolf_total_cleaning_area'].state) + ' m²'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Total arbeidstid
                            icon: mdi:clock-outline
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.rolf_arbeidstid'].state
                              ]]]         
              - type: custom:local-conditional-card
                id: kart
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Soner
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: show
                                - kontroll: hide
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: show
                                - info: hide
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: show
                                - kart: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kart
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soner: hide
                                - kontroll: hide
                                - info: hide
                                - kart: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: vertical-stack
                      cards:
                        - type: picture
                          image_entity: image.rolf
                          theme: Mytheme_v2
                          card_mod:
                            style: >
                              ha-card > img {transform: scale(1.5)
                              translateX(22px)}
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Strøm
            icon: mdi:power-plug
            state: null
            hash: '#strom'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: forbruk
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Forbruk
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: show
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Priser
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: show
                                - forbruk: hide
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Solceller
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: hide
                                - solceller: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Forbruk nå
                            label: |
                              [[[
                                let value = parseInt(states['sensor.amsleser_p'].state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue + '<span style="font-size:14px"> W</span>';
                              ]]]
                            icon: mdi:home-lightning-bolt
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big_2columns
                          variables:
                            name: Nettleie fastpris
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                            state: >
                              [[[  return
                              states['sensor.energy_level_name'].state + ' kWt'
                              ]]]  
                            label: >
                              [[[   return
                              states['sensor.energy_level_price'].state + '<span
                              style="font-size:14px"> kr</span>' ]]]
                    - type: custom:button-card
                      template: sensor_small
                      entity: sensor.amsleser_houruse
                      styles:
                        card:
                          - margin: 12px 0 0 0
                      variables:
                        name: Brukt denne time
                        icon: mdi:transmission-tower-export
                        background: var(--popupBG)
                        label: |
                          [[[
                            return entity.state + ' kWt';
                          ]]]
                    - type: energy-date-selection
                      card_mod:
                        style: >
                          ha-card {background: none;}

                          ha-card > div > hui-energy-period-selector $ div >
                          .label {font-size:10px!important }

                          }
                    - type: energy-usage-graph
                      card_mod:
                        style: |
                          ha-card {background: var(--popupBG);}
                          }
                    - type: custom:gap-card
                      height: 12
                    - type: energy-sources-table
                      card_mod:
                        style: >
                          ha-card {
                            background: var(--popupBG)!important;
                          }

                          .mdc-data-table {
                            background: var(--popupBG)!important;
                          }

                          .mdc-data-table__row {height: 32px!important;}
                          .mdc-data-table__table-container {padding-bottom:
                          12px!important;}            

                          .mdc-data-table__table {
                            white-space: unset!important;
                          }

                          .mdc-data-table__cell, .mdc-data-table__header-cell
                          {border: none!important;}

                          .mdc-data-table .mdc-data-table__header-cell
                          {background:var(--popupBG)!important;border-bottom:1px
                          solid var(--popupBG)!important}

                          .bullet {width: 16px!important;border-radius:
                          24px!important;border-width: 0!important;}
                    - type: custom:gap-card
                      height: 30
              - type: custom:local-conditional-card
                id: priser
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Forbruk
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: show
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Priser
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: show
                                - forbruk: hide
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Solceller
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: hide
                                - solceller: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Strømpris nå
                            label: |
                              [[[
                                return Math.round(states['sensor.strompris3_current_electricity_market_price'].state * 100) / 100 + '<span style="font-size:14px"> kr/kWt</span>'
                              ]]]   
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Estimert strømregning
                            label: |
                              [[[
                                let value = parseInt(states['sensor.estimert_stromregning'].state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue + '<span style="font-size:14px"> kr</span>';
                              ]]]
                            icon: mdi:receipt-text
                            background: var(--popupBG)
                    - type: custom:button-card
                      template: sensor_small
                      entity: binary_sensor.billig_stromperiode4_low_cost
                      state:
                        - value: 'on'
                          label: Nå
                          styles:
                            card:
                              - background: var(--active-big)
                            name:
                              - color: var(--black)
                            img_cell:
                              - background: rgba(var(--highlight_active))
                            icon:
                              - color: var(--black)
                            label:
                              - color: var(--black)
                      styles:
                        card:
                          - margin: 12px 0 0 0
                      variables:
                        name: Neste billige strømperiode
                        icon: mdi:cash-fast
                        background: var(--popupBG)
                        label: |
                          [[[
                            return 'Klokka: ' + helpers.formatTime24h(states['sensor.billig_stromperiode4_low_cost_starts_at'].state) 
                          ]]]
                    - type: custom:button-card
                      view_layout:
                        grid-area: one
                      name: Diverse eksempler
                      styles:
                        card:
                          - background: none
                          - padding: 24px 0 15px 0
                          - '--mdc-ripple-press-opacity': 0
                        name:
                          - font-size: 16px
                          - font-weight: 500
                          - justify-self: start
                          - align-self: center
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Lade 0 til 100%
                            icon: mdi:car
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.ioniq_ladepris_dum'].state + ' kr'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Dusj 10 min
                            icon: mdi:shower-head
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.strom_kostnad_dusj'].state + ' kr'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: TV 1 time
                            icon: mdi:television-ambient-light
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.strom_kostnad_tv'].state + ' kr'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Tørketrommel
                            icon: mdi:tumble-dryer
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.strom_kostnad_torketrommel'].state + ' kr'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Vaskemaskin
                            icon: mdi:washing-machine
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.strom_kostnad_vaskemaskin'].state + ' kr'
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          variables:
                            name: Oppvaskmaskin
                            icon: mdi:dishwasher
                            background: var(--popupBG)
                            label: |
                              [[[
                                return states['sensor.strom_kostnad_oppvaskmaskin'].state + ' kr'
                              ]]]  
              - type: custom:local-conditional-card
                id: solceller
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Forbruk
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: show
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Priser
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: show
                                - forbruk: hide
                                - solceller: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Solceller
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - priser: hide
                                - forbruk: hide
                                - solceller: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Produksjon nå
                            label: |
                              [[[
                                let value = parseInt(states['sensor.afore_inverter_pv_total_power'].state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue + '<span style="font-size:14px"> W</span>';
                              ]]]
                            icon: mdi:solar-power-variant-outline
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Produksjon i år
                            label: |
                              [[[
                                let value = parseInt(states['sensor.afore_inverter_production_yearly'].state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue + '<span style="font-size:14px"> kWt</span>';
                              ]]] 
                            icon: mdi:solar-power
                            background: var(--popupBG)
                    - type: custom:gap-card
                      height: 12
                    - type: custom:button-card
                      show_label: false
                      show_name: false
                      show_icon: false
                      custom_fields:
                        state1: PV1
                        state2: >
                          [[[  return
                          states['sensor.afore_inverter_dc_voltage_pv1'].state +
                          'v' ]]]
                        state3: >
                          [[[  return
                          states['sensor.afore_inverter_dc_current_pv1'].state +
                          'A' ]]]
                        state4: >
                          [[[  return
                          states['sensor.afore_inverter_dc_power_pv1'].state +
                          'W' ]]]
                        state5: PV2
                        state6: >
                          [[[  return
                          states['sensor.afore_inverter_dc_voltage_pv2'].state +
                          'v' ]]]
                        state7: >
                          [[[  return
                          states['sensor.afore_inverter_dc_current_pv2'].state +
                          'A' ]]]
                        state8: >
                          [[[  return
                          states['sensor.afore_inverter_dc_power_pv2'].state +
                          'W' ]]]
                        title1: ''
                        title2: Volt
                        title3: Spenning
                        title4: Effekt
                      styles:
                        grid:
                          - grid-template-areas: >-
                              "i i i i" "title1 title2 title3 title4" "state1
                              state2 state3 state4" "state5 state6 state7
                              state8"
                          - grid-template-columns: 1fr 1fr 1fr 1fr
                          - grid-template-rows: min-content min-content min-content
                        icon:
                          - width: 24px
                          - color: var(--contast20)
                        img_cell:
                          - justify-self: start
                          - width: 24px
                          - height: 24px
                          - margin-left: '-1px'
                          - padding-bottom: 18px
                        card:
                          - padding: 20px 20px 18px 20px
                          - background: var(--popupBG)
                        custom_fields:
                          title1:
                            - justify-self: start
                            - align-self: start
                            - font-size: 14px
                            - opacity: '0.7'
                            - color: var(--contast20)
                            - padding: 2px 0px
                          title2:
                            - justify-self: start
                            - align-self: start
                            - font-size: 14px
                            - opacity: '0.7'
                            - color: var(--contast20)
                            - padding: 2px 0px
                          title3:
                            - justify-self: start
                            - align-self: start
                            - font-size: 14px
                            - opacity: '0.7'
                            - color: var(--contast20)
                            - padding: 2px 0px
                          title4:
                            - justify-self: start
                            - align-self: start
                            - font-size: 14px
                            - opacity: '0.7'
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state1:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state2:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state3:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state4:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state5:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state6:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state7:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                          state8:
                            - justify-self: start
                            - align-self: end
                            - font-size: 16px
                            - font-weight: 500
                            - color: var(--contast20)
                            - padding: 2px 0px
                    - type: energy-date-selection
                      card_mod:
                        style: >
                          ha-card {background: none;}

                          ha-card > div > hui-energy-period-selector $ div >
                          .label {font-size:10px!important }

                          }
                    - type: energy-solar-graph
                      card_mod:
                        style: |
                          ha-card {background: var(--popupBG);}
                          }
                    - type: custom:gap-card
                      height: 12
                    - square: false
                      type: grid
                      columns: 2
                      cards:
                        - type: energy-solar-consumed-gauge
                          card_mod:
                            style: |
                              ha-card {background: var(--popupBG);}
                              }
                        - type: energy-self-sufficiency-gauge
                          card_mod:
                            style: |
                              ha-card {background: var(--popupBG);}
                              }                    
                    - type: custom:gap-card
                      height: 30
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Server
            icon: mdi:server
            state: null
            hash: '#server'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 22px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: homeass
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Home Assistant
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: show
                                - unraid: hide
                                - magicmirror: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Unraid
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: hide
                                - unraid: show
                                - magicmirror: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          styles:
                            card:
                              - height: 144px
                              - margin-bottom: 12px
                          variables:
                            name: Strømforbruk nå
                            label: >
                              [[[ return
                              Math.round((states['sensor.bod_oppe_plugg_homeassist_power'].state)
                              *

                              10)/10 + '<span style="font-size: 0.3em">
                              W</span>' ]]]  
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                        - type: grid
                          square: false
                          columns: 1
                          cards:
                            - type: custom:button-card
                              template: sensor_small
                              variables:
                                label: |
                                  [[[
                                    return (states['sensor.proxserr_cpu_temperature'].state) + '°'
                                  ]]] 
                                icon: mdi:thermometer
                                name: CPU Temperatur
                                background: var(--popupBG)
                            - type: custom:button-card
                              template: sensor_small
                              variables:
                                label: |
                                  [[[
                                    return (states['sensor.proxserr_nvme_temperature'].state) + '°'
                                  ]]] 
                                icon: mdi:thermometer
                                name: HDD Temperatur
                                background: var(--popupBG)
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.processor_use
                          variables:
                            name: CPU
                            icon: mdi:cpu-64-bit
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.memory_use_percent
                          variables:
                            name: Minne
                            icon: mdi:memory
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_big_percentage
                          styles:
                            card:
                              - margin-top: 12px
                            custom_fields:
                              bar:
                                - background-image: >
                                    [[[     var color; var state = entity.state;

                                    if (state >= 70) {
                                        color = "var(--red)";        // Excellent (80-100)
                                    } else if (state >= 50) {
                                        color = "var(--orange)";         // Good (60-79)
                                    } else if (state >= 30) {
                                        color = "var(--yellow)";       // Moderate (40-59)
                                    } else if (state >= 20) {
                                        color = "var(--blue)";       // Poor (20-39)
                                    } else {
                                        color = "var(--green)";          // Very Poor (0-19)
                                    }

                                    return
                                    `repeating-linear-gradient(45deg,transparent,transparent
                                    2px,${color} 3px,transparent 4px)` ]]]    
                          variables:
                            name: Diskplass brukt
                            entity: sensor.disk_use_percent_config
                            icon: mdi:harddisk
                            background: var(--popupBG)
                            bar: >
                              [[[     var color; var state = entity.state;

                              if (state >= 70) {
                                  color = "var(--red)";        // Excellent (80-100)
                              } else if (state >= 50) {
                                  color = "var(--orange)";         // Good (60-79)
                              } else if (state >= 30) {
                                  color = "var(--yellow)";       // Moderate (40-59)
                              } else if (state >= 20) {
                                  color = "var(--blue)";       // Poor (20-39)
                              } else {
                                  color = "var(--green)";          // Very Poor (0-19)
                              }

                              return  `<div> <div style="background:${color};
                              height: 30px;width:${state}%; "></div></div>` ]]]
                            label: >
                              [[[ return entity.state + '<span
                              style="font-size:14px"> %</span>' ]]]
                      columns: 1
              - type: custom:local-conditional-card
                id: unraid
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Home Assistant
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: show
                                - unraid: hide
                                - magicmirror: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Unraid
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - homeass: hide
                                - unraid: show
                                - magicmirror: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          styles:
                            card:
                              - height: 144px
                              - margin-bottom: 12px
                          variables:
                            name: Strømforbruk nå
                            label: >
                              [[[ return
                              Math.round((states['sensor.bod_oppe_plugg_server_power'].state)
                              *

                              10)/10 + '<span style="font-size: 0.3em">
                              W</span>' ]]]  
                            icon: mdi:lightning-bolt
                            background: var(--popupBG)
                        - type: grid
                          square: false
                          columns: 1
                          cards:
                            - type: custom:button-card
                              template: sensor_small
                              variables:
                                label: |
                                  [[[
                                    return (states['sensor.bod_oppe_temperatur_temperature'].state) + '°'
                                  ]]] 
                                icon: mdi:thermometer
                                name: Rom Temperatur
                                background: var(--popupBG)
                            - type: custom:button-card
                              template: sensor_small
                              variables:
                                label: |
                                  [[[
                                    return (states['sensor.unraid_server_homeserr_homeserr_cpu_temperature'].state) + '°'
                                  ]]] 
                                icon: mdi:thermometer
                                name: CPU Temperatur
                                background: var(--popupBG)
                    - square: false
                      columns: 2
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.unraid_server_homeserr_homeserr_cpu_usage
                          variables:
                            name: CPU
                            icon: mdi:cpu-64-bit
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                        - type: custom:button-card
                          template: sensor_small
                          entity: sensor.unraid_server_homeserr_homeserr_ram_usage
                          variables:
                            name: Minne
                            icon: mdi:memory
                            background: var(--popupBG)
                            label: |
                              [[[
                                  return entity.state + "%";   
                              ]]]
                        - type: custom:button-card
                          template: sensor_big_percentage
                          styles:
                            custom_fields:
                              bar:
                                - background-image: >
                                    [[[     var color; var state = entity.state;

                                    if (state >= 70) {
                                        color = "var(--red)";        // Excellent (80-100)
                                    } else if (state >= 50) {
                                        color = "var(--orange)";         // Good (60-79)
                                    } else if (state >= 30) {
                                        color = "var(--yellow)";       // Moderate (40-59)
                                    } else if (state >= 20) {
                                        color = "var(--blue)";       // Poor (20-39)
                                    } else {
                                        color = "var(--green)";          // Very Poor (0-19)
                                    }

                                    return
                                    `repeating-linear-gradient(45deg,transparent,transparent
                                    2px,${color} 3px,transparent 4px)` ]]]  
                          variables:
                            name: Cache brukt
                            entity: >-
                              sensor.unraid_server_homeserr_homeserr_pool_cache_usage
                            icon: mdi:harddisk
                            background: var(--popupBG)
                            bar: >
                              [[[     var color; var state = entity.state;

                              if (state >= 70) {
                                  color = "var(--red)";        // Excellent (80-100)
                              } else if (state >= 50) {
                                  color = "var(--orange)";         // Good (60-79)
                              } else if (state >= 30) {
                                  color = "var(--yellow)";       // Moderate (40-59)
                              } else if (state >= 20) {
                                  color = "var(--blue)";       // Poor (20-39)
                              } else {
                                  color = "var(--green)";          // Very Poor (0-19)
                              }

                              return  `<div> <div style="background:${color};
                              height: 30px;width:${state}%; "></div></div>` ]]]
                            label: >
                              [[[  return entity.state  +'<span
                              style="font-size:14px">%</span>' ]]] 
                        - type: custom:button-card
                          template: sensor_big_percentage
                          styles:
                            custom_fields:
                              bar:
                                - background-image: >
                                    [[[     var color; var state = entity.state;

                                    if (state >= 70) {
                                        color = "var(--red)";        // Excellent (80-100)
                                    } else if (state >= 50) {
                                        color = "var(--orange)";         // Good (60-79)
                                    } else if (state >= 30) {
                                        color = "var(--yellow)";       // Moderate (40-59)
                                    } else if (state >= 20) {
                                        color = "var(--blue)";       // Poor (20-39)
                                    } else {
                                        color = "var(--green)";          // Very Poor (0-19)
                                    }

                                    return
                                    `repeating-linear-gradient(45deg,transparent,transparent
                                    2px,${color} 3px,transparent 4px)` ]]]    
                          variables:
                            name: Array brukt
                            entity: sensor.unraid_server_homeserr_homeserr_array_usage
                            icon: mdi:harddisk
                            background: var(--popupBG)
                            bar: >
                              [[[     var color; var state = entity.state;

                              if (state >= 70) {
                                  color = "var(--red)";        // Excellent (80-100)
                              } else if (state >= 50) {
                                  color = "var(--orange)";         // Good (60-79)
                              } else if (state >= 30) {
                                  color = "var(--yellow)";       // Moderate (40-59)
                              } else if (state >= 20) {
                                  color = "var(--blue)";       // Poor (20-39)
                              } else {
                                  color = "var(--green)";          // Very Poor (0-19)
                              }

                              return  `<div> <div style="background:${color};
                              height: 30px;width:${state}%; "></div></div>` ]]]
                            label: >
                              [[[  return entity.state  +'<span
                              style="font-size:14px">%</span>' ]]] 
                    - type: custom:gap-card
                      height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Ioniq 5
            icon: mdi:car
            state: null
            hash: '#bil'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            sub_button:
              - show_background: false
                entity: sensor.ioniq_5_last_updated_at
                name: Sist oppdatert
                show_name: true
                show_state: false
                icon: mdi:none
                show_last_changed: true
          - type: custom:gap-card
            height: 0
          - square: false
            type: grid
            columns: 2
            cards:
              - type: custom:button-card
                template: sensor_big_percentage
                styles:
                  custom_fields:
                    bar:
                      - background-image: >
                          [[[ var color = "var(--red)";  var state =
                          entity.state;  if (state > 50) color = "var(--blue)"; 
                          else if(state > 30) color = "var(--orange)";

                          return
                          `repeating-linear-gradient(45deg,transparent,transparent
                          2px,${color} 3px,transparent 4px)` ]]]    
                variables:
                  name: EV Batteri
                  entity: sensor.ioniq_5_ev_battery_level
                  icon: mdi:ev-station
                  background: var(--popupBG)
                  bar: >
                    [[[    var color = "var(--red)";  var state = entity.state; 
                    if (state > 50) color = "var(--blue)";  else if(state > 30)
                    color = "var(--orange)";

                    return  `<div> <div style="background:${color}; height:
                    30px;width:${state}%; "></div></div>` ]]]
                  label: |
                    [[[
                      return entity.state + '%'
                    ]]]
              - type: custom:button-card
                template: sensor_big_percentage
                styles:
                  custom_fields:
                    bar:
                      - background-image: >
                          [[[ var color = "var(--red)";  var state =
                          entity.state;  if (state > 50) color = "var(--blue)"; 
                          else if(state > 30) color = "var(--orange)";

                          return
                          `repeating-linear-gradient(45deg,transparent,transparent
                          2px,${color} 3px,transparent 4px)` ]]]    
                variables:
                  name: 12V Batteri
                  entity: sensor.ioniq_5_car_battery_level
                  icon: mdi:car-battery
                  background: var(--popupBG)
                  bar: >
                    [[[   var color = "var(--red)"; var state = entity.state; if
                    (state > 50) color = "var(--blue)"; else if(state > 30)
                    color = "var(--orange)";

                    return  `<div> <div style="background:${color}; height:
                    30px;width:${state}%; "></div></div>` ]]]
                  label: |
                    [[[
                      return entity.state + '%'
                    ]]]
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: info2
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: show
                                - lading: hide
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: hide
                                - kontrolll: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Lading
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: show
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Rekkevidde
                            label: |
                              [[[
                                return states['sensor.ioniq_5_ev_range'].state + '<span style="font-size:14px"> km'
                              ]]]   
                            icon: mdi:road-variant
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          variables:
                            name: Kilometerstand
                            label: |
                              [[[
                                let value = parseInt(states['sensor.ioniq_5_odometer'].state);
                                let formattedValue = value.toLocaleString('en-US', {
                                  useGrouping: true
                                }).replace(',', ' ');
                                return formattedValue + '<span style="font-size:14px"> km</span>';
                              ]]]
                            icon: mdi:speedometer
                            background: var(--popupBG)
                    - type: custom:gap-card
                      height: 12
                    - type: custom:mini-graph-card
                      entities:
                        - entity: sensor.ioniq_5_daily
                      name: Daglig kjøring
                      hours_to_show: 168
                      aggregate_func: max
                      group_by: date
                      font_size: 50
                      font_size_header: 12
                      hour24: true
                      show:
                        graph: bar
                        legend: false
                        icon: false
                        labels: false
                        labels_secondary: false
                      card_mod:
                        style: |
                          ha-card {
                            background: var(--popupBG);
                          }    
                          .header {padding: 2px 8px 8px 16px;}
                          span.state__value {
                            font-weight: 500;
                          } 
                          span.state__uom {
                            font-weight: 500;       
                          }
              - type: custom:local-conditional-card
                id: kontrolll
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: show
                                - lading: hide
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: hide
                                - kontrolll: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Lading
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: show
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          template: sensor_big
                          entity: timer.ioniq_5_heat
                          show_state: true
                          show_label: false
                          tap_action:
                            action: perform-action
                            perform_action: automation.trigger
                            target:
                              entity_id: automation.automation_ioniq_climate
                            data:
                              skip_condition: true
                          state:
                            - value: idle
                              state_display: Venter
                            - value: active
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                state:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          styles:
                            grid:
                              - grid-template-areas: '"i" "s" "n"'
                            state:
                              - justify-self: start
                              - font-size: 2em
                              - font-weight: 300
                              - color: var(--gray800)
                          variables:
                            name: Oppvarming
                            label: Venter
                            icon: mdi:heat-wave
                            background: var(--popupBG)
                        - type: custom:button-card
                          template: sensor_big
                          entity: timer.ioniq_5_cool
                          show_state: true
                          show_label: false
                          tap_action:
                            action: null
                          state:
                            - value: idle
                              state_display: Venter
                            - value: active
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                state:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(40, 40, 42, 0.1)
                          styles:
                            grid:
                              - grid-template-areas: '"i" "s" "n"'
                            state:
                              - justify-self: start
                              - font-size: 2em
                              - font-weight: 300
                              - color: var(--gray800)
                          variables:
                            name: Nedkjøling (funker ikke)
                            label: Venter
                            icon: mdi:fan
                            background: var(--popupBG)
              - type: custom:local-conditional-card
                id: lading
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: show
                                - lading: hide
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Kontroll
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: hide
                                - kontrolll: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Lading
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - info2: hide
                                - lading: show
                                - kontrolll: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      square: false
                      columns: 5
                      cards:
                        - type: custom:button-card
                          name: 50%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit
                          tap_action:
                            action: script.ioniq_soc_50
                          state:
                            - value: '50'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 60%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit
                          tap_action:
                            action: script.ioniq_soc_60
                          state:
                            - value: '60'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 70%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit
                          tap_action:
                            action: script.ioniq_soc_70
                          state:
                            - value: '70'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 80%
                          aspect_ratio: 1/1
                          show_icon: false
                          entity: number.ioniq_5_ac_charging_limit
                          tap_action:
                            action: script.ioniq_soc_80
                          state:
                            - value: '80'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                        - type: custom:button-card
                          name: 100%
                          entity: number.ioniq_5_ac_charging_limit
                          aspect_ratio: 1/1
                          show_icon: false
                          tap_action:
                            action: script.ioniq_soc_100
                          state:
                            - value: '100'
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                          styles:
                            card:
                              - background: var(--popupBG)
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - color: var(--gray800)
                    - type: custom:gap-card
                      height: 24
                    - square: false
                      type: grid
                      columns: 1
                      cards:
                        - square: false
                          type: grid
                          columns: 2
                          cards:
                            - type: custom:button-card
                              template: sensor_small
                              entity: sensor.ioniq_custom
                              variables:
                                name: Ladepris
                                icon: mdi:cash-fast
                                background: var(--popupBG)
                                label: |
                                  [[[
                                      return entity.attributes.ladepris + ' kr'  
                                  ]]]
                            - type: custom:button-card
                              template: sensor_small
                              entity: sensor.ioniq_custom
                              variables:
                                name: Ladetid
                                icon: mdi:clock-time-four
                                background: var(--popupBG)
                                label: |
                                  [[[
                                      return entity.attributes.ladetid   
                                  ]]]
                        - type: custom:button-card
                          template: button_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: Smartlading
                            icon: mdi:ev-station
                            entity: input_boolean.smartlading
                    - type: custom:gap-card
                      height: 24
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Stue nede
            icon: mdi:sofa
            state: null
            hash: '#stue_nede'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--green)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important} 

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
          - type: custom:button-card
            entity: sensor.adax_stue_on
            variables:
              var_temp: >
                [[[ return Math.round((states['sensor.i_9psl_temperatur'].state)
                * 10)/10 + '°' ]]]
              var_hum: >
                [[[ return '<span style="font-size:0.4em; margin-left: -12px">'
                +  Math.round((states['sensor.i_9psl_luftfuktighet'].state) *
                10)/10 + '%' ]]]
            show_icon: false
            show_name: false
            show_label: true
            state:
              - value: 'True'
                styles:
                  card:
                    - background: var(--active-big)
                  custom_fields:
                    state:
                      - color: var(--black)
                    temp:
                      - color: var(--black)
            styles:
              grid:
                - grid-template-areas: '"temp btn_plus" "temp state" "temp btn_minus"'
                - grid-template-columns: 1fr 60px
                - grid-template-rows: min-content 20px min-content
              card:
                - background-color: var(--popupBG)
                - padding: 0
                - margin-top: 12px
              custom_fields:
                state:
                  - justify-self: center
                  - font-size: 14px
                  - line-height: 16px
                  - color: var(--gray800)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 48px
                  - color: var(--gray800)
                  - line-height: 48px
                  - font-weight: 300
                  - padding: 12px 0 0 20px
                graph:
                  - position: absolute
                  - width: 100%
                  - left: 0
                  - bottom: 0
            custom_fields:
              graph:
                card:
                  type: custom:mini-graph-card
                  entities:
                    - entity: sensor.i_9psl_temperatur
                      color: var(--white)
                  line_width: 0
                  height: 22
                  show:
                    icon: false
                    name: false
                    state: false
                    legend: false
                    labels: false
                  card_mod:
                    style: |
                      ha-card {
                        border-style: none;
                        background: none;
                      }    
              state: >
                [[[ return states['input_number.stue_nede_heater_target'].state
                + '°' ]]]
              btn_minus:
                card:
                  type: custom:button-card
                  icon: mdi:chevron-down
                  show_name: false
                  aspect_ratio: 1/1
                  entity: sensor.adax_stue_on
                  state:
                    - value: 'True'
                      styles:
                        icon:
                          - color: var(--black)
                  tap_action:
                    action: call-service
                    service: input_number.decrement
                    target:
                      entity_id:
                        - input_number.stue_nede_heater_target
                    data:
                      amount: 1
                  styles:
                    card:
                      - background: none
                    icon:
                      - color: var(--gray800)
                      - width: 24px
                      - height: 24px
              btn_plus:
                card:
                  type: custom:button-card
                  icon: mdi:chevron-up
                  show_name: false
                  aspect_ratio: 1/1
                  entity: sensor.adax_stue_on
                  state:
                    - value: 'True'
                      styles:
                        icon:
                          - color: var(--black)
                  styles:
                    card:
                      - background: none
                    icon:
                      - color: var(--gray800)
                      - width: 24px
                      - height: 24px
                  tap_action:
                    action: call-service
                    service: input_number.increment
                    target:
                      entity_id:
                        - input_number.stue_nede_heater_target
                    data:
                      amount: 1
              temp: |
                [[[ return `${variables.var_temp} ${variables.var_hum}` ]]] 
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 0 -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            buttons:
              - icon: mdi:lightbulb-on-outline
                layout: icon_name
                name: Mer lys
                tap_action:
                  action: call-service
                  service: script.stue_lys_brighter
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:lightbulb-outline
                layout: icon_name
                name: Mindre lys
                tap_action:
                  action: call-service
                  service: script.stue_lys_darker
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:movie-open
                layout: icon_name
                name: Filmkveld
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.filmkveld
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:lightbulb-night-outline
                layout: icon_name
                name: Kveldslys
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.filmkveld_duplicate
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:lightbulb-off-outline
                layout: icon_name
                name: Lys av
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_nede_alt_lys_av
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:sleep
                layout: icon_name
                name: Natta
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_nede_alt_av
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    margin-right: 36px
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
          - type: horizontal-stack
            cards:
              - type: custom:local-conditional-card
                id: stue_nede_lys
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 12px auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Lys
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - stue_nede_lys: show
                                - stue_nede_enheter: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - stue_nede_lys: hide
                                - stue_nede_enheter: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: vertical-stack
                      cards:
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.dimmer_stue_nede_left
                            - name: Stue
                            - icon: mdi:ceiling-light-multiple
                            - background: var(--popupBG)
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.dimmer_stue_nede_right
                            - name: Spisebord
                            - icon: mdi:table-furniture
                            - background: var(--popupBG)
                        - square: false
                          type: grid
                          cards:
                            - type: custom:decluttering-card
                              template: light_toggle
                              variables:
                                - entity: switch.stue_nede_power_strip_sofa_l3
                                - name: Sofa
                                - icon: mdi:sofa
                                - background: var(--popupBG)
                            - type: custom:decluttering-card
                              template: light_toggle
                              variables:
                                - entity: switch.plug_garderobe_soverom
                                - name: Under trappa
                                - icon: mdi:stairs
                                - background: var(--popupBG)
                          columns: 2
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.dimmer_oppgang
                            - name: Oppgang
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
              - type: custom:local-conditional-card
                id: stue_nede_enheter
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 12px auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: Lys
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - stue_nede_lys: show
                                - stue_nede_enheter: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: Info
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - stue_nede_lys: hide
                                - stue_nede_enheter: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:button-card
                          template: sensor_big_percentage
                          styles:
                            custom_fields:
                              bar:
                                - background-image: >
                                    [[[     var color; var state = entity.state;

                                    if (state >= 80) {
                                        color = "var(--green)";        // Excellent (80-100)
                                    } else if (state >= 60) {
                                        color = "var(--blue)";         // Good (60-79)
                                    } else if (state >= 40) {
                                        color = "var(--yellow)";       // Moderate (40-59)
                                    } else if (state >= 20) {
                                        color = "var(--orange)";       // Poor (20-39)
                                    } else {
                                        color = "var(--red)";          // Very Poor (0-19)
                                    }

                                    return
                                    `repeating-linear-gradient(45deg,transparent,transparent
                                    2px,${color} 3px,transparent 4px)` ]]]    
                          variables:
                            name: Luftkvalitet
                            entity: sensor.luftkvalitet_stue
                            icon: mdi:sprout
                            background: var(--popupBG)
                            bar: >
                              [[[     var color; var state = entity.state;

                              if (state >= 80) {
                                  color = "var(--green)";        // Excellent (80-100)
                              } else if (state >= 60) {
                                  color = "var(--blue)";         // Good (60-79)
                              } else if (state >= 40) {
                                  color = "var(--yellow)";       // Moderate (40-59)
                              } else if (state >= 20) {
                                  color = "var(--orange)";       // Poor (20-39)
                              } else {
                                  color = "var(--red)";          // Very Poor (0-19)
                              }

                              return `<div> <div style="background:${color};
                              height: 30px;width:${state}%; "></div></div>` ]]]
                            label: |
                              [[[
                                return entity.state + '%'
                              ]]]
                        - type: custom:button-card
                          template: sensor_big
                          entity: input_boolean.nspanel_screen_toggle
                          tap_action:
                            action: toggle
                          variables:
                            name: NSPanel
                            icon: mdi:monitor-small
                            background: var(--popupBG)
                          state:
                            - value: 'on'
                              label: På
                              styles:
                                card:
                                  - background: var(--active-big)
                                name:
                                  - color: var(--black)
                                label:
                                  - color: var(--black)
                                icon:
                                  - color: var(--black)
                                img_cell:
                                  - background: rgba(var(--highlight_active))
                            - value: 'off'
                              label: Av
          - type: custom:gap-card
            height: 24
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Kjøkken
            icon: mdi:silverware-fork-knife
            state: null
            hash: '#kjokken'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }       #header-container > button {background: none;}    
              .icon-container {background-color:var(--blue)!important;} 
              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1}  .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatur_kjokken_temperature
              temp: >
                [[[ return
                Math.round((states['sensor.temperatur_kjokken_temperature'].state)
                * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.temperatur_kjokken_humidity'].state)
                * 10)/10 + '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.kjokken_dimmer_left
                  - name: Kjøkkenbenk
                  - icon: mdi:led-strip-variant
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.kjokken_dimmer_right
                  - name: Taklys
                  - icon: mdi:lightbulb-spot
                  - background: var(--popupBG)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Info
                styles:
                  card:
                    - background: none
                    - padding: 0 0 15px 0
                    - overflow: visible
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: grid
                columns: 2
                square: null
                cards:
                  - type: custom:button-card
                    template: sensor_big
                    variables:
                      name: Kjøleskap
                      label: |
                        [[[
                          return states['sensor.temperatur_kjoleskap_temperature'].state + '°'
                        ]]]   
                      icon: mdi:fridge
                      background: var(--popupBG)
                  - type: custom:button-card
                    entity: sensor.oppvaskmaskin
                    name: Oppvaskmaskin
                    show_icon: true
                    icon: mdi:dishwasher
                    show_label: true
                    state:
                      - value: 'off'
                        label: Av
                        styles:
                          card:
                            - padding: 0 4px 20px 20px
                            - background: var(--popupBG)
                          grid:
                            - grid-template-areas: '"i" "l" "n"'
                            - grid-template-columns: 1fr
                          label:
                            - padding: 0
                            - color: var(--gray800)
                          name:
                            - padding: 0
                            - color: var(--gray800)
                          icon:
                            - color: var(--gray800)
                          img_cell:
                            - justify-self: end
                            - background: rgba(var(--highlight))
                          custom_fields:
                            program:
                              - display: none
                            bar:
                              - display: none
                    styles:
                      card:
                        - padding: 0
                        - height: 180px
                        - border-radius: 30px
                        - background: var(--active-big)
                      grid:
                        - grid-template-areas: '"i" "program" "n" "bar"'
                      name:
                        - justify-self: start
                        - align-self: start
                        - font-size: 14px
                        - color: var(--black)
                        - padding-left: 20px
                        - opacity: '0.7'
                      label:
                        - justify-self: start
                        - font-size: 40px
                        - font-weight: 300
                        - color: var(--black)
                        - padding: 0 0 20px 20px
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 14px
                        - border-radius: 50%
                        - margin: 4px 4px 0 0
                        - width: 30px
                        - height: 30px
                      icon:
                        - width: 30px
                        - height: 30px
                        - color: var(--black)
                      custom_fields:
                        program:
                          - justify-self: start
                          - font-size: 40px
                          - font-weight: 300
                          - padding-left: 5px
                          - padding-right: 5px
                          - color: var(--black)
                        bar:
                          - justify-self: start
                          - width: 100%
                          - background: >-
                              repeating-linear-gradient(45deg,transparent,transparent
                              2px,var(--gray200) 3px,transparent 4px)
                          - height: 30px
                          - margin-top: 6px
                    custom_fields:
                      program: >
                        [[[ return '<marquee behavior="alternate"
                        scrollamount="1">&nbsp;' + entity.attributes.remain_time
                        + '<span style="font-size: 0.3em">&nbsp;&nbsp;' +
                        states['sensor.dishwasher_states'].attributes.current_course
                        +
                         ' · ' + 
                         states['sensor.dishwasher_states'].attributes.run_state + ' <\marquee>'
                        ]]]  
                      bar: >
                        [[[   var state =
                        states['sensor.dishwashing_remain_percent'].state;

                        return  `<div> <div style="background:var(--black);
                        height: 30px;width:${state}%; "></div></div>` ]]]  
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Gang
            icon: mdi:door
            state: null
            hash: '#gang'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--yellow)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important;}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatur_gang_temperature
              temp: >
                [[[ return
                Math.round((states['sensor.temperatur_gang_temperature'].state)
                * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.temperatur_gang_humidity'].state) *
                10)/10 + '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.gruppe_gang_taklys
                  - name: Taklampe
                  - icon: mdi:ceiling-light
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.lamp_ute_carport
                  - name: Utelampe
                  - icon: mdi:coach-lamp
                  - background: var(--popupBG)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Info
                styles:
                  card:
                    - background: none
                    - padding: 0 0 15px 0
                    - overflow: visible
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: custom:button-card
                    template: sensor_big
                    entity: lock.inngangsdor
                    variables:
                      name: Inngangsdør
                      background: var(--popupBG)
                      icon: mdi:fridge
                    state:
                      - value: unlocked
                        label: Ulåst
                        icon: mdi:door-open
                        styles:
                          card:
                            - background: var(--active-big)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                          icon:
                            - color: var(--black)
                          img_cell:
                            - background: rgba(var(--highlight_active))
                      - value: locked
                        label: Låst
                        icon: mdi:door-closed
                  - type: custom:button-card
                    template: sensor_big
                    entity: switch.plug_magicmirror
                    variables:
                      name: Magic Mirror
                      icon: mdi:mirror-rectangle
                      background: var(--popupBG)
                    state:
                      - value: 'on'
                        label: På
                        styles:
                          card:
                            - background: var(--active-big)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                          icon:
                            - color: var(--black)
                          img_cell:
                            - background: rgba(var(--highlight_active))
                      - value: 'off'
                        label: Skrudd av
                        styles:
                          card:
                            - background: var(--red)
                      - value: unavailable
                        label: Skrudd av
                        styles:
                          card:
                            - background: var(--red)
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Stue oppe
            icon: mdi:desk
            hash: '#stue_oppe'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--orange)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:button-card
            entity: switch.stue_oppe_plugg_varmeovn
            tap_action:
              action: toggle
            variables:
              var_temp: >
                [[[ return
                Math.round((states['sensor.stue_oppe_sensor_temperatur_temperature'].state)
                * 10)/10 + '°' ]]]
              var_hum: >
                [[[ return '<span style="font-size:0.4em; margin-left: -12px">'
                + 
                Math.round((states['sensor.stue_oppe_sensor_temperatur_humidity'].state)
                * 10)/10 + '%' ]]]
            show_icon: false
            show_name: false
            show_label: true
            state:
              - value: 'on'
                styles:
                  card:
                    - background: var(--active-big)
                  custom_fields:
                    state:
                      - color: var(--black)
                    temp:
                      - color: var(--black)
            styles:
              grid:
                - grid-template-areas: '"temp btn_plus" "temp state" "temp btn_minus"'
                - grid-template-columns: 1fr 60px
                - grid-template-rows: min-content 20px min-content
              card:
                - background-color: var(--popupBG)
                - padding: 0
                - margin-top: 12px
              custom_fields:
                state:
                  - justify-self: center
                  - font-size: 14px
                  - line-height: 16px
                  - color: var(--gray800)
                temp:
                  - justify-self: start
                  - text-align: left
                  - font-size: 48px
                  - color: var(--gray800)
                  - line-height: 48px
                  - font-weight: 300
                  - padding: 12px 0 0 20px
                graph:
                  - position: absolute
                  - width: 100%
                  - left: 0
                  - bottom: 0
            custom_fields:
              graph:
                card:
                  type: custom:mini-graph-card
                  entities:
                    - entity: sensor.stue_oppe_sensor_temperatur_temperature
                      color: var(--white)
                  line_width: 0
                  height: 22
                  show:
                    icon: false
                    name: false
                    state: false
                    legend: false
                    labels: false
                  card_mod:
                    style: |
                      ha-card {
                        border-style: none;
                        background: none;
                      }    
              state: >
                [[[ return states['input_number.stue_oppe_heater_upper'].state +
                '°' ]]]
              btn_minus:
                card:
                  type: custom:button-card
                  icon: mdi:chevron-down
                  show_name: false
                  aspect_ratio: 1/1
                  entity: switch.stue_oppe_plugg_varmeovn
                  state:
                    - value: 'on'
                      styles:
                        icon:
                          - color: var(--black)
                  tap_action:
                    action: call-service
                    service: input_number.decrement
                    target:
                      entity_id:
                        - input_number.stue_oppe_heater_upper
                    data:
                      amount: 0.1
                  styles:
                    card:
                      - background: none
                    icon:
                      - color: var(--gray800)
                      - width: 24px
                      - height: 24px
              btn_plus:
                card:
                  type: custom:button-card
                  icon: mdi:chevron-up
                  show_name: false
                  aspect_ratio: 1/1
                  entity: switch.stue_oppe_plugg_varmeovn
                  state:
                    - value: 'on'
                      styles:
                        icon:
                          - color: var(--black)
                  styles:
                    card:
                      - background: none
                    icon:
                      - color: var(--gray800)
                      - width: 24px
                      - height: 24px
                  tap_action:
                    action: call-service
                    service: input_number.increment
                    target:
                      entity_id:
                        - input_number.stue_oppe_heater_upper
                    data:
                      amount: 0.1
              temp: |
                [[[ return `${variables.var_temp} ${variables.var_hum}` ]]] 
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 0 -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            buttons:
              - icon: mdi:lightbulb-on-outline
                layout: icon_name
                name: Mer lys
                tap_action:
                  action: call-service
                  service: script.lys_all_brighter_stue_oppe
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:lightbulb-outline
                layout: icon_name
                name: Mindre lys
                tap_action:
                  action: call-service
                  service: script.lys_all_darker_stue_oppe
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:desk
                layout: icon_name
                name: Kontor
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_hjemmekontor
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:sleep
                layout: icon_name
                name: Leggetid
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_leggetid
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:power
                layout: icon_name
                name: Alt av
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  target:
                    entity_id: scene.stue_oppe_alt_av
                  data:
                    transition: 1
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    margin-right: 36px
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.gruppe_stue_oppe_taklampe
                  - name: Taklampe
                  - icon: mdi:ceiling-light
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.trappa_dimmer_taklampe
                  - name: Trappa
                  - icon: mdi:stairs
                  - background: var(--popupBG)
              - square: false
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: light_slider
                    variables:
                      - entity: light.dimmer_lampe_stue_oppe
                      - name: Bordlampe
                      - icon: mdi:lamp
                      - background: var(--popupBG)
                  - type: custom:decluttering-card
                    template: light_toggle
                    variables:
                      - entity: switch.stue_oppe_lampe_pult
                      - name: Pulten
                      - icon: mdi:desk-lamp
                      - background: var(--popupBG)
                columns: 2
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Bad oppe
            icon: mdi:bathtub
            hash: '#bad_oppe'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--red)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatur_bad_oppe_temperature
              temp: >
                [[[ return
                Math.round((states['sensor.temperatur_bad_oppe_temperature'].state)
                * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.temperatur_bad_oppe_humidity'].state)
                * 10)/10 + '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.lamp_bad_oppe_tak
                  - name: Taklampe
                  - icon: mdi:ceiling-light-multiple-outline
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.bad_oppe_skaplys
                  - name: Skaplys
                  - icon: mdi:spotlight-beam
                  - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Bad nede
            icon: mdi:washing-machine
            state: null
            hash: '#bad_nede'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--blue-dark)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatur_bad_nede_temperature
              temp: >
                [[[ return
                Math.round((states['sensor.temperatur_bad_nede_temperature'].state)
                * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.temperatur_bad_nede_humidity'].state)
                * 10)/10 + '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.bad_nede_taklampe
                  - name: Taklampe
                  - icon: mdi:ceiling-light
                  - background: var(--popupBG)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Info
                styles:
                  card:
                    - background: none
                    - padding: 0 0 15px 0
                    - overflow: visible
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:button-card
                entity: sensor.vaskemaskin
                name: Vaskemaskin
                show_icon: true
                icon: mdi:washing-machine
                show_label: true
                state:
                  - value: 'off'
                    label: Av
                    styles:
                      card:
                        - padding: 0 4px 20px 20px
                        - background: var(--popupBG)
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                        - grid-template-columns: 1fr
                      label:
                        - padding: 0
                        - color: var(--gray800)
                      name:
                        - padding: 0
                        - color: var(--gray800)
                      icon:
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: end
                        - background: rgba(var(--highlight))
                      custom_fields:
                        program:
                          - display: none
                          - color: var(--gray800)
                        bar:
                          - display: none
                styles:
                  card:
                    - padding: 0
                    - height: 180px
                    - border-radius: 30px
                    - background: var(--active-big)
                  grid:
                    - grid-template-areas: '"i i" "program program" "n n" "bar bar"'
                    - grid-template-columns: min-content 1fr
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - color: var(--black)
                    - padding-left: 20px
                    - opacity: '0.7'
                  label:
                    - justify-self: start
                    - font-size: 40px
                    - font-weight: 300
                    - color: var(--black)
                    - padding: 0 0 20px 20px
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - margin: 4px 4px 0 0
                    - background: rgba(var(--highlight_active))
                    - padding: 14px
                    - border-radius: 50%
                    - width: 30px
                    - height: 30px
                  icon:
                    - width: 30px
                    - height: 30px
                    - color: var(--black)
                  custom_fields:
                    program:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 300
                      - color: var(--black)
                      - padding: 0 5px 0 5px
                    bar:
                      - justify-self: start
                      - width: 100%
                      - background: >-
                          repeating-linear-gradient(45deg,transparent,transparent
                          2px,var(--gray200) 3px,transparent 4px)
                      - height: 30px
                      - margin-top: 6px
                custom_fields:
                  program: >
                    [[[ return '<marquee behavior="alternate"
                    scrollamount="3">&nbsp;' + entity.attributes.remain_time +
                    '<span style="font-size: 0.3em">&nbsp;&nbsp;' +
                    entity.attributes.current_course +
                     ' · ' + 
                     entity.attributes.run_state + ' <\marquee>'
                    ]]]  
                  bar: >
                    [[[   var state =
                    states['sensor.washing_remain_percent'].state;

                    return  `<div> <div style="background:var(--black); height:
                    30px;width:${state}%; "></div></div>` ]]]  
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Soverom
            icon: mdi:bed-king
            hash: '#soverom'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--purple)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: custom:button-card
            template: room_conditions
            variables:
              background: var(--popupBG)
              entity: sensor.temperatur_soverom_temperature
              temp: >
                [[[ return
                Math.round((states['sensor.temperatur_soverom_temperature'].state)
                * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                Math.round((states['sensor.temperatur_soverom_humidity'].state)
                * 10)/10 + '%']]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Lys
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.lys_soverom_sengegavl
                  - name: Sengegavl
                  - icon: mdi:led-strip-variant
                  - background: var(--popupBG)
              - type: custom:decluttering-card
                template: light_slider
                variables:
                  - entity: light.soverom_dimmer_taklampe
                  - name: Taklampe
                  - icon: mdi:ceiling-light
                  - background: var(--popupBG)
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:decluttering-card
                    template: light_toggle
                    variables:
                      - entity: light.lys_soverom_madeleine
                      - name: Leselys Madeleine
                      - icon: mdi:face-woman
                      - background: var(--popupBG)
                  - type: custom:decluttering-card
                    template: light_toggle
                    variables:
                      - entity: light.lys_soverom_anders
                      - name: Leselys Anders
                      - icon: mdi:face-man
                      - background: var(--popupBG)
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: Scener
                styles:
                  card:
                    - background: none
                    - padding: 12px 0 15px 0
                    - overflow: visible
                    - '--mdc-ripple-press-opacity': 0
                  name:
                    - font-size: 16px
                    - font-weight: 500
                    - justify-self: start
                    - align-self: center
              - type: custom:paper-buttons-row
                styles:
                  gap: 8px
                  justify-content: flex-start
                  overflow: scroll
                  margin: 0
                  width: calc(100% + 18px)
                extra_styles: |
                  ::-webkit-scrollbar {
                    display: none;
                  }
                buttons:
                  - icon: mdi:lightbulb-on-outline
                    layout: icon_name
                    name: Mer lys
                    tap_action:
                      action: call-service
                      service: script.lys_soverom_all_lights_on_brighter
                    styles:
                      name:
                        color: var(--gray800)
                      button:
                        padding: 12px
                        width: 76px
                        height: 76px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background-color: var(--popupBG)
                        border-radius: 24px
                        color: var(--white)
                      icon:
                        '--mdc-icon-size': 26px
                        color: var(--gray800)
                  - icon: mdi:lightbulb-outline
                    layout: icon_name
                    name: Mindre lys
                    tap_action:
                      action: call-service
                      service: script.lys_soverom_all_lights_on_darker
                    styles:
                      name:
                        color: var(--gray800)
                      button:
                        padding: 12px
                        width: 76px
                        height: 76px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background-color: var(--popupBG)
                        border-radius: 24px
                        color: var(--white)
                      icon:
                        '--mdc-icon-size': 26px
                        color: var(--gray800)
                  - icon: mdi:heart
                    layout: icon_name
                    name: Løøøvee
                    tap_action:
                      action: call-service
                      service: scene.turn_on
                      target:
                        entity_id: scene.soverom_romance
                      data:
                        transition: 1
                    styles:
                      name:
                        color: var(--gray800)
                      button:
                        padding: 12px
                        width: 76px
                        height: 76px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background-color: var(--popupBG)
                        border-radius: 24px
                        color: var(--white)
                      icon:
                        '--mdc-icon-size': 26px
                        color: var(--gray800)
                  - icon: mdi:power
                    layout: icon_name
                    name: Alt av
                    tap_action:
                      action: call-service
                      service: scene.turn_on
                      target:
                        entity_id: scene.soverom_alt_av
                      data:
                        transition: 1
                    styles:
                      name:
                        color: var(--gray800)
                      button:
                        padding: 12px
                        width: 76px
                        height: 76px
                        flex-basis: 1
                        flex-shrink: 0
                        display: flex
                        background-color: var(--popupBG)
                        border-radius: 24px
                        color: var(--white)
                      icon:
                        '--mdc-icon-size': 26px
                        color: var(--gray800)
              - type: custom:gap-card
                height: 36
          - type: custom:gap-card
            height: 36
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Barnerom
            icon: mdi:bed
            hash: '#barnerom'
            is_sidebar_hidden: true
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }      

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--pink)!important;} 

              .icon-container > ha-icon
              {color:var(--black)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: custom:local-conditional-card
                id: soverom_sandra
                default: show
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: sandra
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_sandra: show
                                - soverom_jenny: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: jenny
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_sandra: hide
                                - soverom_jenny: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_sandra_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_sandra_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_sandra_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.sandra_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.sandra_bulb_lampe
                            - name: Lampe
                            - icon: mdi:lamp
                            - background: var(--popupBG)
              - type: custom:local-conditional-card
                id: soverom_jenny
                default: hide
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:paper-buttons-row
                      styles:
                        justify-content: center
                        margin: 0 auto 6px auto
                        width: max-content
                        background-color: var(--popupBG)
                        border: 4px solid var(--popupBG)
                        border-radius: 28px
                      buttons:
                        - layout: name
                          name: sandra
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_sandra: show
                                - soverom_jenny: hide
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--gray800)
                            button:
                              display: flex
                              height: 24px
                              background-color: none
                              border-radius: 24px
                              color: var(--white)
                        - layout: name
                          name: jenny
                          ripple: none
                          tap_action:
                            action: fire-dom-event
                            local_conditional_card:
                              action: set
                              ids:
                                - soverom_sandra: hide
                                - soverom_jenny: show
                          styles:
                            name:
                              padding: 0 22px
                              color: var(--black)
                            button:
                              display: flex
                              height: 24px
                              background: var(--active-small)
                              border-radius: 24px
                              color: var(--white)
                    - type: custom:gap-card
                      height: 6
                    - type: custom:button-card
                      template: room_conditions
                      variables:
                        background: var(--popupBG)
                        entity: sensor.temperatur_jenny_temperature
                        temp: >
                          [[[ return
                          Math.round((states['sensor.temperatur_jenny_temperature'].state)
                          * 10)/10 + '°' + '<span style="font-size:0.3em">' +
                          Math.round((states['sensor.temperatur_jenny_humidity'].state)
                          * 10)/10 + '%']]]
                    - type: vertical-stack
                      cards:
                        - type: custom:button-card
                          name: Lys
                          styles:
                            card:
                              - background: none
                              - padding: 12px 0 15px 0
                              - '--mdc-ripple-press-opacity': 0
                            name:
                              - font-size: 16px
                              - font-weight: 500
                              - justify-self: start
                              - align-self: center
                        - type: custom:decluttering-card
                          template: light_slider
                          variables:
                            - entity: light.jenny_dimmer_taklampe
                            - name: Taklampe
                            - icon: mdi:ceiling-light
                            - background: var(--popupBG)
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            name: Lys
            icon: mdi:lightbulb-group-outline
            state: null
            hash: '#lys'
            is_sidebar_hidden: true
            styles: >-
              .bubble-pop-up-container {
                --vertical-stack-card-gap: 0px!important;
              } #header-container > div > div {
                background: var(--popupBG)!important;
              }     

              #header-container > button {background: none;}    

              .icon-container {background-color:var(--gray800)!important;} 

              .icon-container > ha-icon
              {color:var(--gray000)!important;opacity:1!important}

              .bubble-icon {
                --mdc-icon-size: 24px !important;
              }
            bg_blur: '5'
            shadow_opacity: '20'
            bg_opacity: '98'
            margin_top_mobile: 50px
            margin_top_desktop: 50px
            card_layout: large
          - type: custom:gap-card
            height: 0
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.dimmer_stue_nede_left
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.dimmer_stue_nede_left
                    - name: Stue
                    - icon: mdi:ceiling-light-multiple
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.dimmer_stue_nede_right
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.dimmer_stue_nede_right
                    - name: Spisebord
                    - icon: mdi:table-furniture
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: switch.stue_nede_power_strip_sofa_l3
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_toggle
                  variables:
                    - entity: switch.stue_nede_power_strip_sofa_l3
                    - name: Sofa
                    - icon: mdi:sofa
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.kjokken_dimmer_left
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.kjokken_dimmer_left
                    - name: Kjøkkenbenk
                    - icon: mdi:led-strip-variant
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.kjokken_dimmer_right
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.kjokken_dimmer_right
                    - name: Kjøkken tak
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.dimmer_oppgang
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.dimmer_oppgang
                    - name: Oppgang
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.gruppe_gang_taklys
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.gruppe_gang_taklys
                    - name: Gangen
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.trappa_dimmer_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.trappa_dimmer_taklampe
                    - name: Trappa
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.gruppe_stue_oppe_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.gruppe_stue_oppe_taklampe
                    - name: Stue oppe tak
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.dimmer_lampe_stue_oppe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.dimmer_lampe_stue_oppe
                    - name: Stue oppe lampe
                    - icon: mdi:lamp
                    - background: var(--gray800)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.bad_nede_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.bad_nede_taklampe
                    - name: Bad nede
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.lamp_bad_oppe_tak
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.lamp_bad_oppe_tak
                    - name: Bad oppe
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.bad_oppe_skaplys
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.bad_oppe_skaplys
                    - name: Bad oppe skap
                    - icon: mdi:spotlight-beam
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.soverom_dimmer_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.soverom_dimmer_taklampe
                    - name: Soverom tak
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.lys_soverom_sengegavl
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.lys_soverom_sengegavl
                    - name: Soverom gavl
                    - icon: mdi:led-strip-variant
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.lys_soverom_anders
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.lys_soverom_anders
                    - name: Leselys Anders
                    - icon: mdi:face-man
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.lys_soverom_madeleine
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.lys_soverom_madeleine
                    - name: Leselys Madeleine
                    - icon: mdi:face-woman
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.lamp_ute_carport
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.lamp_ute_carport
                    - name: Utelys
                    - icon: mdi:outdoor-lamp
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.jenny_dimmer_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.jenny_dimmer_taklampe
                    - name: jenny tak
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.sandra_dimmer_taklampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.sandra_dimmer_taklampe
                    - name: sandra tak
                    - icon: mdi:ceiling-light
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.sandra_bulb_lampe
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_slider
                  variables:
                    - entity: light.sandra_bulb_lampe
                    - name: sandra lampe
                    - icon: mdi:lamp
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.stue_oppe_lampe_pult
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_toggle
                  variables:
                    - entity: light.stue_oppe_lampe_pult
                    - name: Pult
                    - icon: mdi:lamp
                    - background: var(--popupBG)
              - type: conditional
                conditions:
                  - condition: state
                    entity: light.plug_under_trapp
                    state: 'on'
                card:
                  type: custom:decluttering-card
                  template: light_toggle
                  variables:
                    - entity: light.plug_under_trapp
                    - name: Under trappa
                    - icon: mdi:lamp
                    - background: var(--popupBG)
          - type: custom:gap-card
            height: 24
    type: custom:grid-layout
    layout:
      grid-template-columns: 100%
      grid-template-rows: auto
      grid-template-areas: |
        "header"
        "left"
        "right"
        "footer"  
      mediaquery:
        '(min-width: 1024px)':
          grid-template-columns: 50% 50%
          justify-content: center
          grid-template-areas: |
            "header ."
            "left right"
            "footer footer" 
    theme: Mytheme_v2
